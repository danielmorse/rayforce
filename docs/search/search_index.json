{"config":{"lang":["en"],"separator":"[\\s\\u200b\\-_,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"]},"docs":[{"location":"index.html","title":"Welcome to RayforceDB","text":"<p>The \"another one\" columnar database engineered to optimize your data analytics and storage solutions, ensuring a seamless, high-speed experience, which has:</p> <ul> <li> <p> Simple LISP-like syntax</p> <p>Using a simple and intuitive syntax simplifies the learning curve and making things clear.</p> <p> Syntax</p> </li> <li> <p> Columnar storage</p> <p>The columnar storage is a great way to optimize the storage and speed up the queries due to heavy usage of the vectorized operations.</p> </li> <li> <p> Plain C</p> <p>RayforceDB is written in plain C with no dependencies, which makes it easy to integrate and maintain. As a bonus, it's very compact (less 1Mb) to fit directly into CPU cache.</p> </li> <li> <p> Open Source, MIT</p> <p>RayforceDB is licensed under MIT and available on GitHub</p> <p> Try it online</p> </li> </ul> <p></p>"},{"location":"content/atomic.html","title":"Atomic functions","text":""},{"location":"content/faq.html","title":"FAQ","text":""},{"location":"content/faq.html#general","title":"General","text":""},{"location":"content/faq.html#what-is-rayforce","title":"What is Rayforce?","text":"<p>Rayforce is a high-performance data processing engine with its own language called Rayfall.</p>"},{"location":"content/faq.html#what-kind-of-language-is-rayfall","title":"What kind of language is Rayfall?","text":"<p>Rayfall is a functional programming language with: - Dynamic typing - First-class functions - Immutable data structures - Built-in support for tables and time-series data - Native support for parallel processing</p>"},{"location":"content/faq.html#data-types","title":"Data Types","text":""},{"location":"content/faq.html#what-are-the-basic-data-types","title":"What are the basic data types?","text":"<ul> <li>Atoms: <code>i64</code>, <code>f64</code>, <code>symbol</code>, <code>char</code>, <code>date</code>, <code>time</code>, <code>timestamp</code>, <code>guid</code></li> <li>Vectors: Lists of atoms of the same type</li> <li>Lists: Heterogeneous collections</li> <li>Tables: Column-oriented data structures</li> <li>Dictionaries: Key-value mappings</li> </ul>"},{"location":"content/faq.html#how-are-strings-represented","title":"How are strings represented?","text":"<p>Strings are vectors of characters and must be created using lists, not vector literals: <pre><code>;; Correct\n(list \"Hello\" \"World\")\n\n;; Incorrect\n[\"Hello\" \"World\"]  ;; Vectors can't contain strings\n</code></pre></p>"},{"location":"content/faq.html#how-are-symbols-different-from-strings","title":"How are symbols different from strings?","text":"<p>Symbols are interned strings - they are stored only once in memory and comparison is very fast. They're ideal for categorical data like status codes, department names, etc. <pre><code>;; Symbol vector (no quotes needed)\n[pending active completed]\n\n;; Symbol creation\n'pending  ;; Quote creates a symbol\n</code></pre></p>"},{"location":"content/faq.html#tables-and-queries","title":"Tables and Queries","text":""},{"location":"content/faq.html#how-do-i-create-a-table","title":"How do I create a table?","text":"<pre><code>(table [name age score]  ;; Column names as symbols\n       (list (list \"Alice\" \"Bob\")  ;; Strings in lists\n             [25 30]               ;; Numbers in vectors\n             [85 90]))\n</code></pre>"},{"location":"content/faq.html#how-do-i-query-data","title":"How do I query data?","text":"<p>Using the <code>select</code> function with a dictionary of parameters: <pre><code>(select {name: name \n         avg_score: (avg score)\n         from: students\n         where: (&gt; score 80)\n         by: age})\n</code></pre></p>"},{"location":"content/faq.html#performance","title":"Performance","text":""},{"location":"content/faq.html#how-does-rayforce-handle-large-datasets","title":"How does Rayforce handle large datasets?","text":"<ul> <li>Column-oriented storage for efficient memory use</li> <li>Automatic parallelization of operations</li> <li>Memory-mapped files for large datasets</li> <li>Optimized vector operations</li> </ul>"},{"location":"content/faq.html#what-operations-are-parallelized","title":"What operations are parallelized?","text":"<p>Most vector operations and aggregations are automatically parallelized, including: - Mathematical operations - Comparisons - Aggregations (sum, avg, etc.) - Map/filter operations</p>"},{"location":"content/faq.html#development","title":"Development","text":""},{"location":"content/faq.html#how-do-i-handle-errors","title":"How do I handle errors?","text":"<p>Using the <code>try</code> function: <pre><code>(try \n  (dangerous-operation)\n  {e: (println \"Error:\" e)})\n</code></pre></p>"},{"location":"content/faq.html#how-do-i-profile-code","title":"How do I profile code?","text":"<p>Using the <code>timeit</code> function: <pre><code>(timeit (expensive-calculation))\n</code></pre></p>"},{"location":"content/faq.html#how-do-i-load-external-code","title":"How do I load external code?","text":"<p>Using the <code>load</code> function: <pre><code>(load \"mylib.rf\")\n</code></pre></p>"},{"location":"content/faq.html#temporal-data","title":"Temporal Data","text":""},{"location":"content/faq.html#how-are-dates-and-times-handled","title":"How are dates and times handled?","text":"<ul> <li>Dates: Days since epoch (1970.01.01)</li> <li>Times: Milliseconds since midnight</li> <li>Timestamps: Milliseconds since epoch <pre><code>;; Current timestamp in local timezone\n(timestamp 'local)\n\n;; Parse date\n(as 'date \"2024.03.15\")\n</code></pre></li> </ul>"},{"location":"content/faq.html#what-timezone-handling-is-available","title":"What timezone handling is available?","text":"<ul> <li>Local timezone based on system settings</li> <li>UTC timezone available for all temporal functions</li> <li>Timezone conversion respects daylight savings</li> </ul>"},{"location":"content/faq.html#memory-management","title":"Memory Management","text":""},{"location":"content/faq.html#is-there-garbage-collection","title":"Is there garbage collection?","text":"<p>Yes, Rayforce includes automatic garbage collection. Manual collection can be triggered with: <pre><code>(gc)\n</code></pre></p>"},{"location":"content/faq.html#how-do-i-check-memory-usage","title":"How do I check memory usage?","text":"<p>Using the <code>memstat</code> function: <pre><code>(memstat)\n</code></pre></p>"},{"location":"content/license.html","title":"License","text":"<p>MIT License</p> <p>Copyright (c) 2023 Anton Kundenko singaraiona@gmail.com</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"content/reference.html","title":"Reference card","text":""},{"location":"content/reference.html#builtin-functions","title":"Builtin functions","text":"<p>cmp</p> eq, ne, lt, le, gt, ge <p>compose</p> as, concat, dict, table, group, guid, list, enlist, rand, reverse, til, distinct <p>control </p> if, try, raise, exit,   do, return <p>env</p> set, let, env, memstat <p>format</p> format, print,   println, show <p>io</p> read, write, read-csv, get-parted,   get-splayed, get, hopen, hclose,   set-parted, set-splayed <p>items</p> at, enum, except, filter, find, first, in, key, last, sect, take, union, where, within <p>iter</p> apply, map, fold <p>join</p> left-join, inner-join <p>logic</p> and, or, not, like, nil? <p>math </p> +, -, *, /, %, avg, div,  max, min, sum, xbar, round, floor, ceil, med, dev <p>misc</p> count, type, rc, gc, meta <p>order</p> asc, desc, iasc, idesc, neg, xasc, xdesc <p>query</p> select <p>repl</p> args, commands, eva, exec, load, parse, quote, resolve,   set-display-width, set-fpr, use-unicode-format <p>serde</p> ser, de <p>temporal</p> date, time, timestamp <p>time</p> timer, timeit <p>update</p> alter, insert, upsert, update <p>interfacing</p> loadfn"},{"location":"content/reference.html#datatypes","title":"Datatypes","text":"Id Name Size Description 0 <code>List</code> - Generic List 1 <code>B8</code> 1 Boolean 2 <code>U8</code> 1 Byte 3 <code>I16</code> 2 Signed Short 4 <code>I32</code> 4 Signed 32-bit Integer 5 <code>I64</code> 8 Signed 64-bit Integer 6 <code>Symbol</code> 8 Symbol (interned string) 7 <code>Date</code> 4 Date 8 <code>Time</code> 4 Time 9 <code>Timestamp</code> 8 Timestamp 10 <code>F64</code> 8 64-bit Floating Point 11 <code>Guid</code> 16 Globally Unique Identifier 12 <code>C8</code> 8 Char 20 <code>Enum</code> - Enumerated Type 98 <code>Table</code> - Table 99 <code>Dict</code> - Dictionary 100 <code>Lambda</code> - Lambda (user function) 101 <code>Unary</code> - Unary (function with 1 argument) 102 <code>Binary</code> - Binary (function with 2 arguments) 103 <code>Vary</code> - Vary (function with n arguments) 126 <code>Null</code> - Generic NULL 127 <code>Error</code> - Error (special type for errors)"},{"location":"content/syntax.html","title":"Syntax Overview","text":""},{"location":"content/syntax.html#atoms","title":"Atoms","text":"basic types<pre><code>;; Boolean\ntrue\nfalse\n\n;; Character\n'a'\n\n;; Integer (i64)\n42\n-17\n\n;; Float (f64)\n42.1\n42.0\n-3.14\n\n;; Symbol\nname        ;; Bare symbol\n'name       ;; Quoted symbol\n</code></pre> temporal types<pre><code>;; Date (days since epoch)\n2024.03.15\n\n;; Time (ms since midnight)\n10:30:00\n\n;; Timestamp (date + time)\n2024.03.15T10:30:00\n</code></pre>"},{"location":"content/syntax.html#compound-types","title":"Compound Types","text":"vectors<pre><code>;; Integer vector\n[1 2 3 4]\n\n;; Float vector\n[1.0 2.5 3.3 4.4]\n\n;; Symbol vector (no quotes needed)\n[name age score]\n\n;; Date vector\n[2024.03.15 2024.03.16 2024.03.17]\n\n;; Time vector\n[10:30:00 11:45:00 12:15:00]\n</code></pre> strings and lists<pre><code>;; String (character vector)\n\"Hello, world!\"\n\n;; List of strings (must use list for strings)\n(list \"Alice\" \"Bob\" \"Charlie\")\n\n;; Heterogeneous list\n(list 1 \"two\" [3 4 5] {x: 6})\n</code></pre> dictionaries<pre><code>;; Dictionary with symbol keys\n{name: \"Alice\" \n age: 30 \n scores: [85 90 95]}\n\n;; Nested dictionaries\n{user: {id: 1 name: \"Alice\"}\n data: {x: 10 y: 20}}\n</code></pre> tables<pre><code>;; Table creation\n(table [name age score]           ;; Column names as symbols\n       (list (list \"Alice\" \"Bob\") ;; String column as list\n             [25 30]              ;; Number column as vector\n             [85 90]))            ;; Another number column\n\n;; Display\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 name  \u2502 age \u2502 score \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Alice \u2502 25  \u2502 85    \u2502\n\u2502 Bob   \u2502 30  \u2502 90    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"content/syntax.html#special-types","title":"Special Types","text":"guid<pre><code>;; Generate new GUIDs\n\u21aa (guid 1)\n[550e8400-e29b-41d4-a716-446655440000]\n\n;; Parse GUID from string\n\u21aa (as 'guid \"550e8400-e29b-41d4-a716-446655440000\")\n550e8400-e29b-41d4-a716-446655440000\n</code></pre>"},{"location":"content/syntax.html#functions","title":"Functions","text":"functions<pre><code>;; Function definition\n\u21aa (set add (fn [x y] (+ x y)))\n\n;; Lambda with multiple expressions\n\u21aa (set process (fn [x] \n                 (set tmp (* x 2))\n                 (+ tmp 10)))\n\n;; Immediate lambda execution\n\u21aa ((fn [x] (* x 2)) 21)\n42\n</code></pre>"},{"location":"content/syntax.html#expressions","title":"Expressions","text":"<p>Rayfall uses prefix notation where the function comes before its arguments:</p> <pre><code>;; Basic arithmetic\n\u21aa (+ 1 2)     ;; Binary function\n3\n\u21aa (- 10 5)\n5\n\n;; Function composition\n\u21aa (+ (* 2 3) (/ 10 2))\n11\n\n;; Aggregations\n\u21aa (avg [1 2 3 4])  ;; Unary function\n2.5\n\n;; Multiple arguments\n\u21aa (list 1 2 3)     ;; Vary function\n[1 2 3]\n</code></pre>"},{"location":"content/syntax.html#comments","title":"Comments","text":"<pre><code>;; Single line comment\n\n;; Multi-line comment\n;; continues here\n;; and here\n</code></pre>"},{"location":"content/syntax.html#special-forms","title":"Special Forms","text":"<pre><code>;; Quote - prevents evaluation\n\u21aa (quote x)\n'x\n\n;; Set - assigns value\n\u21aa (set x 42)\n42\n\n;; Try - error handling\n\u21aa (try \n     (dangerous-operation)\n     {e: (println \"Error:\" e)})\n</code></pre>"},{"location":"content/benchmarks/bench.html","title":"DB(s) Benchmark","text":"<p>For benches we are using the following tool: H2OAI Bench</p>"},{"location":"content/benchmarks/bench.html#prerequisites","title":"Prerequisites","text":"<p>Ubuntu:</p> <pre><code>sudo apt install r-base\n</code></pre> <p>Run <code>R</code> and then in a R console type: </p> <pre><code>install.packages(\"data.table\")\n</code></pre> <p>Exit from R and type in a terminal:</p> <pre><code>Rscript _data/groupby-datagen.R 1e7 1e2 0 0\n</code></pre>"},{"location":"content/benchmarks/bench.html#group-by-behchmark","title":"Group By behchmark","text":"<p>Dataset: G1_1e7_1e2_0_0.csv (10 million rows)</p>"},{"location":"content/benchmarks/bench.html#duckdb-multithread-turned-on","title":"DuckDB (multithread turned on)","text":"<p><code>.timer \"on\"</code></p> <p>Load CSV: <code>create table t as SELECT * FROM read_csv('./db-benchmark/G1_1e7_1e2_0_0.csv');</code></p> <ul> <li>Q1: <code>select id1, sum(v1) AS v1 from t group by id1; --&gt; 63ms</code></li> <li>Q2: <code>select id1, id2, sum(v1) AS v1 from t group by id1, id2; --&gt; 153ms</code></li> <li>Q3: <code>select id3, sum(v1) AS v1, mean(v3) AS v3 from t group by id3; --&gt; 360ms</code></li> <li>Q4: <code>select id4, mean(v1) AS v1, mean(v2) AS v2, mean(v3) AS v3 from t group by id4; --&gt; 23ms</code></li> <li>Q5: <code>select id6, sum(v1) AS v1, sum(v2) AS v2, sum(v3) AS v3 from t group by id6; --&gt; 322ms</code></li> <li>Q6: <code>select id3, max(v1)-min(v2) AS range_v1_v2 from t group by id3; --&gt; 330ms</code></li> <li>Q7: <code>select id1, id2, id3, id4, id5, id6, sum(v3) AS v3, count(*) AS count from t group by id1, id2, id3, id4, id5, id6; --&gt; 878ms</code></li> </ul>"},{"location":"content/benchmarks/bench.html#duckdb-multithread-turned-off","title":"DuckDB (multithread turned off)","text":"<p><code>.timer \"on\"</code> <code>SET threads = 1;</code></p> <p>Load CSV: <code>create table t as SELECT * FROM read_csv('./db-benchmark/G1_1e7_1e2_0_0.csv');</code></p> <ul> <li>Q1: <code>select id1, sum(v1) AS v1 from t group by id1; --&gt; 347ms</code></li> <li>Q2: <code>select id1, id2, sum(v1) AS v1 from t group by id1, id2; --&gt; 690ms</code></li> <li>Q3: <code>select id3, sum(v1) AS v1, mean(v3) AS v3 from t group by id3; --&gt; 601ms</code></li> <li>Q4: <code>select id4, mean(v1) AS v1, mean(v2) AS v2, mean(v3) AS v3 from t group by id4; --&gt; 108ms</code></li> <li>Q5: <code>select id6, sum(v1) AS v1, sum(v2) AS v2, sum(v3) AS v3 from t group by id6; --&gt; 440ms</code></li> <li>Q6: <code>select id3, max(v1)-min(v2) AS range_v1_v2 from t group by id3; --&gt; 528ms</code></li> <li>Q7: <code>select id1, id2, id3, id4, id5, id6, sum(v3) AS v3, count(*) AS count from t group by id1, id2, id3, id4, id5, id6; --&gt; 3269ms</code></li> </ul>"},{"location":"content/benchmarks/bench.html#clickhouse","title":"ClickHouse","text":"<p>Load CSV: <code>CREATE TABLE t (id1 String, id2 String, id3 String, id4 Int64, id5 Int64, id6 Int64, v1 Int64, v2 Int64, v3 Float64) ENGINE = Memory;</code></p> <p>clickhouse-client -q \"INSERT INTO default.t FORMAT CSV\" &lt; ./db-benchmark/G1_1e7_1e2_0_0.csv</p> <ul> <li>Q1: <code>select id1, sum(v1) AS v1 from t group by id1; --&gt; 51ms</code></li> <li>Q2: <code>select id1, id2, sum(v1) AS v1 from t group by id1, id2; --&gt; 189ms</code></li> <li>Q3: <code>select id3, sum(v1) AS v1, avg(v3) AS v3 from t group by id3; --&gt; 235ms</code></li> <li>Q4: <code>select id4, avg(v1) AS v1, avg(v2) AS v2, avg(v3) AS v3 from t group by id4; --&gt; 47ms</code></li> <li>Q5: <code>select id6, sum(v1) AS v1, sum(v2) AS v2, sum(v3) AS v3 from t group by id6; --&gt; 265ms</code></li> <li>Q6: <code>select id3, max(v1)-min(v2) AS range_v1_v2 from t group by id3; --&gt; 249ms</code></li> <li>Q7: <code>select id1, id2, id3, id4, id5, id6, sum(v3) AS v3, count(*) AS count from t group by id1, id2, id3, id4, id5, id6; --&gt; 1732ms</code></li> </ul>"},{"location":"content/benchmarks/bench.html#40","title":"? (4.0)","text":"<p>Load CSV: <code>t: (\"SSSJJJJJF\";enlist\",\") 0: hsym `$\":./db-benchmark/G1_1e7_1e2_0_0.csv\"</code></p> <ul> <li>Q1: <code>\\t select v1: sum v1 by id1 from t --&gt; 59ms</code></li> <li>Q2: <code>\\t select v1: sum v1 by id1, id2 from t --&gt; 143ms</code></li> <li>Q3: <code>\\t select v1: sum v1, v3: avg v3 by id3 from t --&gt; 166ms</code></li> <li>Q4: <code>\\t select v1: avg v1, v2: avg v2, v3: avg v3 by id4 from t --&gt; 99ms</code></li> <li>Q5: <code>\\t select v1: sum v1, v2: sum v2, v3: sum v3 by id6 from t --&gt; 156ms</code></li> <li>Q6: <code>\\t select range_v1_v2: (max v1) - (min v2) by id3 from t --&gt; 551ms</code></li> <li>Q7: <code>\\t select v3: sum v3, cnt: count i by id1, id2, id3, id4, id5, id6 from t --&gt; 4497ms</code></li> </ul>"},{"location":"content/benchmarks/bench.html#rayforce","title":"Rayforce","text":"<p>Load CSV: <code>(set t (csv [Symbol Symbol Symbol I64 I64 I64 I64 I64 F64] \"./db-benchmark/G1_1e7_1e2_0_0.csv\"))</code></p> <ul> <li>Q1: <code>\\t (select {v1: (sum v1) from: t by: id1}) --&gt; 60ms</code></li> <li>Q2: <code>\\t (select {v1: (sum v1) from: t by: {id1: id1 id2: id2}}) --&gt; 74ms</code></li> <li>Q3: <code>\\t (select {v1: (sum v1) v3: (avg v3) from: t by: id3}) --&gt; 118ms</code></li> <li>Q4: <code>\\t (select {v1: (avg v1) v2: (avg v2) v3: (avg v3) from: t by: id4}) --&gt; 72ms</code></li> <li>Q5: <code>\\t (select {v1: (sum v1) v2: (sum v2) v3: (sum v3) from: t by: id6}) --&gt; 122ms</code></li> <li>Q6: <code>\\t (select {range_v1_v2: (- (max v1) (min v2)) from: t by: id3}) --&gt; 104ms</code></li> <li>Q7: <code>\\t (select {v3: (sum v3) count: (map count v3) from: t by: {id1: id1 id2: id2 id3: id3 id4: id4 id5: id5 id6: id6}}) --&gt; 1394ms</code></li> </ul>"},{"location":"content/benchmarks/bench.html#theplatform","title":"ThePlatform","text":"<p>Load CSV: <code>t: (\"SSSJJJJJF\";enlist\",\") 0: `$\":./db-benchmark/G1_1e7_1e2_0_0.csv\"</code></p> <ul> <li>Q1: <code>\\t 0N#.?[t;();`id1!`id1;`v1!(sum;`v1)] --&gt; 213ms</code></li> <li>Q2: <code>\\t 0N#.?[t;();`id1`id2!`id1`id2;`v1!(sum;`v1)] --&gt; 723ms</code></li> <li>Q3: <code>\\t 0N#.?[t;();`id3!`id3;`v2`v3!((sum;`v2);(avg;`v3))] --&gt; 507ms</code></li> <li>Q4: <code>\\t 0N#.?[t;();`id4!`id4;`v1`v2`v3!((avg;`v1);(avg;`v2);(avg;`v3))] --&gt; 285ms</code></li> <li>Q5: <code>\\t 0N#.?[t;();`id6!`id6;`v1`v2`v3!((sum;`v1);(sum;`v2);(sum;`v3))] --&gt; 488ms</code></li> <li>Q6: <code>\\t 0N#.?[?[t;();`id3!`id3;`v1`v2!((max;`v1);(min;`v2))];();0b;`id3`range_v1_v2!(`id3;(-;`v1;`v2))] --&gt; 465ms</code></li> <li>Q7: <code>\\t 0N#.?[t;();`id1`id2`id3`id4`id5`id6!`id1`id2`id3`id4`id5`id6;`v3`count!((sum;`v3);(count;`v3))] --&gt; 15712ms</code></li> </ul>"},{"location":"content/benchmarks/bench.html#group-by-results","title":"Group By Results","text":"DB Q1 Q2 Q3 Q4 Q5 Q6 Q7 DuckDB (multithread turned on) 63 153 360 23 322 330 878 DuckDB (multithread turned off) 347 690 601 108 440 528 3269 ClickHouse 51 189 235 47 265 249 1732 ? (4.0) 59 143 166 99 156 551 4497 Rayforce 60 74 118 72 122 104 1394 ThePlatform 213 723 507 285 488 465 15712"},{"location":"content/benchmarks/bench.html#join-benchmark","title":"Join Benchmark","text":"<pre><code>Rscript _data/join-datagen.R 1e7 1e2 0 0\n</code></pre>"},{"location":"content/benchmarks/bench.html#duckdb-multithread-turned-on_1","title":"DuckDB (multithread turned on)","text":"<p><code>.timer \"on\"</code></p> <p>Load CSV:</p> <ul> <li>x: <code>create table x as SELECT * FROM read_csv('./db-benchmark/J1_1e7_NA_0_0.csv');</code></li> <li>y: <code>create table y as SELECT * FROM read_csv('./db-benchmark/J1_1e7_1e7_0_0.csv');</code></li> </ul> <p>Queries:</p> <ul> <li>Q1: <code>select * from x left join y on x.id1 = y.id1 and x.id2 = y.id2; --&gt; OOM</code></li> <li>Q2: <code>select * from x inner join y on x.id1 = y.id1 and x.id2 = y.id2; --&gt; OOM</code></li> </ul>"},{"location":"content/benchmarks/bench.html#duckdb-multithread-turned-off_1","title":"DuckDB (multithread turned off)","text":"<p><code>.timer \"on\"</code> <code>SET threads = 1;</code></p> <p>Queries:</p> <ul> <li>Q1: <code>select * from x left join y on x.id1 = y.id1 and x.id2 = y.id2; --&gt; OOM</code></li> <li>Q2: <code>select * from x inner join y on x.id1 = y.id1 and x.id2 = y.id2; --&gt; OOM</code></li> </ul>"},{"location":"content/benchmarks/bench.html#clickhouse_1","title":"ClickHouse","text":"<p>Load CSV:</p> <ul> <li><code>CREATE TABLE x (id1 Int64, id2 Int64, id3 Int64, id4 String, id5 String, id6 String, v1 Float64) ENGINE = Memory;</code></li> <li><code>CREATE TABLE y (id1 Int64, id2 Int64, id3 Int64, id4 String, id5 String, id6 String, v2 Float64) ENGINE = Memory;</code></li> </ul> <p>clickhouse-client -q \"INSERT INTO default.x FORMAT CSV\" &lt; ./db-benchmark/J1_1e7_NA_0_0.csv clickhouse-client -q \"INSERT INTO default.y FORMAT CSV\" &lt; ./db-benchmark/J1_1e7_1e7_0_0.csv</p> <p>Queries:</p> <ul> <li>Q1: <code>select * from x left join y on x.id1 = y.id1 and x.id2 = y.id2; --&gt; OOM</code></li> <li>Q2: <code>select * from x inner join y on x.id1 = y.id1 and x.id2 = y.id2; --&gt; OOM</code></li> </ul>"},{"location":"content/benchmarks/bench.html#40_1","title":"? (4.0)","text":"<p>Load CSV:</p> <ul> <li>x: <code>(\"JJJSSSF\";enlist\",\") 0: `$\":./db-benchmark/J1_1e7_NA_0_0.csv\"</code></li> <li>y: <code>(\"JJJSSSF\";enlist\",\") 0: `$\":./db-benchmark/J1_1e7_1e7_0_0.csv\"</code></li> </ul> <p>Queries:</p> <ul> <li>Q1: <code>\\t x lj 2!y --&gt; 3174ms</code></li> <li>Q2: <code>\\t x ij 2!y --&gt; 3098ms</code></li> </ul>"},{"location":"content/benchmarks/bench.html#rayforce_1","title":"Rayforce","text":"<p>Load CSV:</p> <ul> <li><code>(set x (csv [I64 I64 I64 Symbol Symbol Symbol F64] \"./db-benchmark/J1_1e7_NA_0_0.csv\"))</code></li> <li><code>(set y (csv [I64 I64 I64 Symbol Symbol Symbol F64] \"./db-benchmark/J1_1e7_1e7_0_0.csv\"))</code></li> </ul> <p>Queries:</p> <ul> <li>Q1: <code>\\t (lj [id1 id2] x y) --&gt; 3149ms</code></li> <li>Q2: <code>\\t (ij [id1 id2] x y) --&gt; 1610ms</code></li> </ul>"},{"location":"content/benchmarks/bench.html#theplatform_1","title":"ThePlatform","text":"<p>Load CSV:</p> <ul> <li>x: <code>(\"JJJSSSF\";enlist\",\") 0: `$\":./db-benchmark/J1_1e7_NA_0_0.csv\"</code></li> <li>y: <code>(\"JJJSSSF\";enlist\",\") 0: `$\":./db-benchmark/J1_1e7_1e7_0_0.csv\"</code></li> </ul> <p>Queries:</p> <ul> <li> <p>Q1: <code>\\t 0N#.(?[lj[(`x;x);(`y;y);((~`x`id1;~`x`id2);(~`y`id1;~`y`id2))]; (); 0b; `a`b`c`d`e`f`g`h!(~`y`id1;~`y`id2;`y`id3;~`y`id4;~`y`id5;~`y`id6;~`x`v1;~`y`v2)]) --&gt; 23987ms</code></p> </li> <li> <p>Q2: <code>\\t 0N#.(?[ij[(`x;x);(`y;y);((~`x`id1;~`x`id2);(~`y`id1;~`y`id2))]; (); 0b; `a`b`c`d`e`f`g`h!(~`y`id1;~`y`id2;`y`id3;~`y`id4;~`y`id5;~`y`id6;~`x`v1;~`y`v2)]) --&gt; 34104ms</code></p> </li> </ul>"},{"location":"content/benchmarks/bench.html#join-results","title":"Join Results","text":"DB Q1 Q2 DuckDB (multithread turned on) OOM OOM DuckDB (multithread turned off) OOM OOM ClickHouse OOM OOM ? (4.0) 3174 3098 Rayforce 3149 1610 ThePlatform 23987 34104"},{"location":"content/benchmarks/run.html","title":"Benchmark Toolkit","text":"<p>The Rayforce benchmark toolkit allows you to measure and compare the performance of Rayforce scripts. This guide explains how to use the toolkit effectively.</p>"},{"location":"content/benchmarks/run.html#running-benchmarks","title":"Running Benchmarks","text":"<p>To run benchmarks, use the <code>make bench</code> command:</p> <pre><code># Run all benchmarks\nmake bench\n\n# Run a specific benchmark\nmake bench BENCH=string_ops\n</code></pre> <p>The <code>BENCH</code> environment variable specifies which benchmark to run. If not provided, all benchmarks in the <code>bench/scripts</code> directory will be executed.</p>"},{"location":"content/benchmarks/run.html#benchmark-script-format","title":"Benchmark Script Format","text":"<p>Benchmark scripts are Rayforce scripts with special comments that specify benchmark parameters:</p> <pre><code>;; --iterations=1000 --expected-time=10.0\n\n;; Create a large list and perform operations on it\n(let [n 10000\n      lst (range n)]\n  (-&gt; lst\n      (map (fn [x] (* x x)))\n      (filter (fn [x] (&gt; x (/ n 2))))\n      (reduce +)\n      (sort &gt;)))\n</code></pre>"},{"location":"content/benchmarks/run.html#parameters","title":"Parameters","text":"<ul> <li><code>--iterations=N</code>: Number of times to run the benchmark (default: 1000)</li> <li><code>--expected-time=N</code>: Expected execution time in milliseconds (default: 0.0)</li> </ul>"},{"location":"content/benchmarks/run.html#results","title":"Results","text":"<p>Benchmark results are stored in <code>bench/results.json</code> and include:</p> <ul> <li>Minimum execution time</li> <li>Maximum execution time</li> <li>Average execution time</li> <li>Expected time</li> <li>System information</li> <li>Git commit hash</li> <li>Timestamp</li> </ul>"},{"location":"content/benchmarks/run.html#example-output","title":"Example Output","text":"<pre><code>Benchmark Results for string_ops:\n----------------------------------------\nPrevious Run: 2025-03-27 15:03:45\nCurrent Run:  2025-03-27 15:05:10\n\nPerformance Metrics:\n  Min Time: 0.003 ms +200.0%\n  Max Time: 0.041 ms +141.2%\n  Avg Time: 0.005 ms +138.9%\n  Exp Time: 10.000 ms -100.0%\n\nSummary: Performance has degraded by 138.9% since last run\n</code></pre>"},{"location":"content/benchmarks/run.html#writing-benchmark-scripts","title":"Writing Benchmark Scripts","text":"<ol> <li>Create a new <code>.rf</code> file in the <code>bench/scripts</code> directory</li> <li>Add benchmark parameters using the <code>;;</code> comment syntax</li> <li>Write your benchmark code</li> <li>Optionally, create an initialization script with the same name but <code>.init.rf</code> suffix</li> </ol>"},{"location":"content/benchmarks/run.html#example","title":"Example","text":"<pre><code>;; --iterations=1000 --expected-time=10.0\n\n;; Create a large string and perform operations on it\n(let [str \"The quick brown fox jumps over the lazy dog. \"\n      n 1000]\n  ;; String concatenation\n  (let [long_str (reduce (range n) (fn [acc _] (str+ acc str)) \"\")\n        ;; String splitting\n        words (split long_str \" \")\n        ;; String joining\n        joined (join words \",\")\n        ;; String replacement\n        replaced (replace long_str \"dog\" \"cat\")]\n    ;; Return results to prevent optimization\n    [long_str words joined replaced]))\n</code></pre>"},{"location":"content/benchmarks/run.html#initialization-scripts","title":"Initialization Scripts","text":"<p>If you need to set up test data or perform initialization before running the benchmark, create an initialization script with the same name as your benchmark script but with a <code>.init.rf</code> suffix:</p> <pre><code>;; bench/scripts/example_bench.init.rf\n;; This is an initialization script that runs before the main benchmark\n\n;; Set random seed for reproducibility\n(let [random_seed 42]\n  (rand random_seed)\n  ;; Create any necessary global variables or functions\n  (def global_config {max_rows: 10000 \n                     min_price: 0 \n                     max_price: 1000}))\n</code></pre> <p>The initialization script runs once before the benchmark iterations begin.</p>"},{"location":"content/benchmarks/run.html#best-practices","title":"Best Practices","text":"<ol> <li>Consistent Environment: Run benchmarks in a consistent environment to get reliable results</li> <li>Warm-up: Consider adding a warm-up iteration before timing</li> <li>Multiple Runs: Run benchmarks multiple times to account for system variations</li> <li>Meaningful Tests: Write benchmarks that test real-world scenarios</li> <li>Documentation: Document what each benchmark is testing and why</li> </ol>"},{"location":"content/benchmarks/run.html#troubleshooting","title":"Troubleshooting","text":"<p>If you encounter issues:</p> <ol> <li>Check that your benchmark script exists in <code>bench/scripts</code></li> <li>Verify the script syntax is correct</li> <li>Ensure you have write permissions for <code>bench/results.json</code></li> <li>Check the system information in the results to verify the environment</li> </ol>"},{"location":"content/benchmarks/run.html#see-also","title":"See Also","text":"<ul> <li>Benchmark Results - Overview of Rayforce's benchmark results </li> </ul>"},{"location":"content/cmp/eq.html","title":"Equal <code>==</code>","text":"<p>The <code>==</code> function compares two values and returns <code>true</code> if the values are equal.</p> <pre><code>;; Number comparisons\n\u21aa (== 1 1)\ntrue\n\u21aa (== 1 2)\nfalse\n\n;; Array comparisons\n\u21aa (== [1 2 3] 1)\n[true false false]\n\u21aa (== [1 2 3] [1 2 3])\n[true true true]\n\u21aa (== [1 2 3] [1 2 4])\n[true true false]\n\n;; String comparisons\n\u21aa (== \"hello\" \"hello\")\ntrue\n\u21aa (== \"hello\" \"world\")\nfalse\n\n;; Float comparisons\n\u21aa (== 3.14 3.14)\ntrue\n\u21aa (== 3.14 3.140)\ntrue\n\n;; Mixed type comparisons\n\u21aa (== 1 1.0)\ntrue\n\u21aa (== \"1\" 1)\nfalse\n\n;; Array comparisons\n\u21aa (== [1 2 3] [1.0 2.0 3.0])\n[true true true]\n\n;; Comparing with null\n\u21aa (== null null)\ntrue\n\u21aa (== 1 null)\nfalse\n</code></pre> <p>Warning</p> <p>Comparing values of different types may lead to unexpected results. Always ensure you're comparing compatible types.</p> <p>Info</p> <p>When comparing arrays with a scalar value, the comparison is performed element-wise.</p>"},{"location":"content/cmp/ge.html","title":"Greater than or Equal <code>&gt;=</code>","text":"<p>The <code>&gt;=</code> function compares two values and returns <code>true</code> if the first value is greater than or equal to the second value.</p> <pre><code>;; Number comparisons\n\u21aa (&gt;= 2 1)\ntrue\n\u21aa (&gt;= 1 1)\ntrue\n\u21aa (&gt;= 1 2)\nfalse\n\n;; Array comparisons\n\u21aa (&gt;= [3 2 1] 2)\n[true true false]\n\u21aa (&gt;= [3 2 1] [3 1 1])\n[true true true]\n\n;; Float comparisons\n\u21aa (&gt;= 3.14 3.14)\ntrue\n\u21aa (&gt;= 3.0 3.14)\nfalse\n\n;; String comparisons (lexicographical order)\n\u21aa (&gt;= \"zoo\" \"zoo\")\ntrue\n\u21aa (&gt;= \"apple\" \"zoo\")\nfalse\n</code></pre> <p>Important</p> <p>The <code>&gt;=</code> operator is equivalent to <code>(or (&gt; a b) (== a b))</code> but is more efficient.</p> <p>Info</p> <p>When comparing arrays with a scalar value, the comparison is performed element-wise.</p>"},{"location":"content/cmp/gt.html","title":"Greater Than <code>&gt;</code>","text":"<p>The <code>&gt;</code> function compares two values and returns <code>true</code> if the first value is greater than the second value.</p> <pre><code>;; Number comparisons\n\u21aa (&gt; 2 1)\ntrue\n\u21aa (&gt; 1 2)\nfalse\n\u21aa (&gt; 1 1)\nfalse\n\n;; Array comparisons\n\u21aa (&gt; [3 2 1] 2)\n[true false false]\n\u21aa (&gt; [3 2 1] [2 2 0])\n[true false true]\n\n;; Float comparisons\n\u21aa (&gt; 3.14 3.0)\ntrue\n\u21aa (&gt; 3.0 3.14)\nfalse\n\n;; String comparisons (lexicographical order)\n\u21aa (&gt; \"zoo\" \"apple\")\ntrue\n\u21aa (&gt; \"apple\" \"zoo\")\nfalse\n</code></pre> <p>Warning</p> <p>Comparing values of different types may lead to unexpected results. Always ensure you're comparing compatible types.</p> <p>Info</p> <p>When comparing arrays with a scalar value, the comparison is performed element-wise.</p>"},{"location":"content/cmp/le.html","title":"Lower or equal to <code>&lt;=</code>","text":"<p>The <code>&lt;=</code> function is used to compare two values. It returns <code>true</code> if the first value is lower than or equal to the second value, otherwise it returns <code>false</code>.</p> <pre><code>\u21aa (&lt;= 1 1)\ntrue\n\u21aa (&lt;= 2 1)\nfalse\n\u21aa (&lt;= 1 2)\ntrue\n\u21aa (&lt;= [1 2 3] 1)\n[true false false]\n\u21aa (&lt;= [1 2 3] [1 2 3])\n[true true true]\n\u21aa (&lt;= [1 2 3] [1 2 4])\n[true true true]\n</code></pre>"},{"location":"content/cmp/lt.html","title":"Less Than <code>&lt;</code>","text":"<p>The <code>&lt;</code> function compares two values and returns <code>true</code> if the first value is less than the second value.</p> <pre><code>;; Number comparisons\n\u21aa (&lt; 1 2)\ntrue\n\u21aa (&lt; 2 1)\nfalse\n\u21aa (&lt; 1 1)\nfalse\n\n;; Array comparisons\n\u21aa (&lt; [1 2 3] 2)\n[true false false]\n\u21aa (&lt; [1 2 3] [2 2 4])\n[true false true]\n\n;; Float comparisons\n\u21aa (&lt; 3.0 3.14)\ntrue\n\u21aa (&lt; 3.14 3.0)\nfalse\n\n;; String comparisons (lexicographical order)\n\u21aa (&lt; \"apple\" \"zoo\")\ntrue\n\u21aa (&lt; \"zoo\" \"apple\")\nfalse\n</code></pre> <p>Warning</p> <p>Comparing values of different types may lead to unexpected results. Always ensure you're comparing compatible types.</p> <p>Info</p> <p>When comparing arrays with a scalar value, the comparison is performed element-wise.</p> <pre><code>\u21aa (&lt; 1 1)\nfalse\n\u21aa (&lt; 2 1)\nfalse\n\u21aa (&lt; 1 2)\ntrue\n\u21aa (&lt; [1 2 3] 1)\n[false false false]\n\u21aa (&lt; [1 2 3] [1 2 3])\n[false false false]\n\u21aa (&lt; [1 2 3] [1 2 4])\n[false false true]\n</code></pre>"},{"location":"content/cmp/ne.html","title":"Not Equal <code>!=</code>","text":"<p>The <code>!=</code> function compares two values and returns <code>true</code> if the values are not equal.</p> <pre><code>;; Number comparisons\n\u21aa (!= 1 2)\ntrue\n\u21aa (!= 1 1)\nfalse\n\n;; Array comparisons\n\u21aa (!= [1 2 3] 2)\n[false true true]\n\u21aa (!= [1 2 3] [1 2 4])\n[false false true]\n\n;; String comparisons\n\u21aa (!= \"hello\" \"world\")\ntrue\n\u21aa (!= \"hello\" \"hello\")\nfalse\n\n;; Float comparisons\n\u21aa (!= 3.14 3.0)\ntrue\n\u21aa (!= 3.14 3.140)\nfalse\n\n;; Mixed type comparisons\n\u21aa (!= \"1\" 1)\ntrue\n\u21aa (!= 1 1.0)\nfalse\n\n;; Comparing with null\n\u21aa (!= null null)\nfalse\n\u21aa (!= 1 null)\ntrue\n</code></pre> <p>Important</p> <p>The <code>!=</code> operator is equivalent to <code>(not (== a b))</code> but may be more readable in some contexts.</p> <p>Warning</p> <p>Be careful when comparing different types - the result might not always be what you expect.</p>"},{"location":"content/compose/as.html","title":"As <code>as</code>","text":"<p>Casts a value to a specified type.</p> <pre><code>\u21aa (as 'i64 1.5)\n1\n\u21aa (as 'f64 1)\n1.0\n\u21aa (as 'I64 [1.2 3 4])\n[1 3 4]\n\u21aa (as 'f64 [1 2 3])\n[1.0 2.0 3.0]\n\u21aa (as 'String 1)\n\"1\"\n\u21aa (as 'String [1 2 3])\n\"[1 2 3]\" \n</code></pre> <p>Info</p> <p>When casting arrays, the operation is performed element-wise.</p> <p>Warning</p> <p>Casting between incompatible types may result in runtime errors.</p> <p>Note</p> <p>Supported type symbols: 'i64, 'f64, 'String, 'I64, 'F64</p>"},{"location":"content/compose/concat.html","title":"Concat <code>concat</code>","text":"<p>Concatenates two values into a single list or array.</p> <pre><code>\u21aa (concat 1 2)\n[1 2]\n\u21aa (concat 1 [2 3])\n[1 2 3]\n\u21aa (concat [1 2] 3)\n[1 2 3]\n\u21aa (concat (list 1 2 \"asd\") 7)\n(\n  1\n  2\n  asd\n  7\n)\n</code></pre> <p>Info</p> <ul> <li>When concatenating arrays of the same type, the result is an array</li> <li>When concatenating different types, the result is a list</li> <li>Single values are treated as one-element lists/arrays</li> </ul> <p>Tip</p> <p>Use concat to build arrays incrementally or combine heterogeneous data</p>"},{"location":"content/compose/dict.html","title":"Dict <code>dict</code>","text":"<p>Creates a dictionary with the specified keys and values.</p> <pre><code>\u21aa (dict [a b c] [1 2 3])\n{\n  a: 1\n  b: 2\n  c: 3\n}\n\u21aa (dict [a b c] (list \"A\" [1 2] 5.77))\n{\n  a: A\n  b: [1 2]\n  c: 5.77\n}\n</code></pre> <p>Warning</p> <p>The keys and values arrays must have the same length</p> <p>Info</p> <ul> <li>Keys can be symbols or strings</li> <li>Values can be of any type</li> <li>Keys must be unique</li> </ul>"},{"location":"content/compose/distinct.html","title":"Distinct <code>distinct</code>","text":"<p>Returns a sorted list of unique elements from the input.</p> <pre><code>\u21aa (distinct [1 2 3 1 2 3 4 5 6 7 8 9 0])\n[0 1 2 3 4 5 6 7 8 9]\n</code></pre> <p>Info</p> <ul> <li>The output is always sorted in ascending order</li> <li>Works with numbers, strings, and other comparable types</li> <li>Maintains the type of the input (array \u2192 array, list \u2192 list)</li> </ul> <p>Tip</p> <p>Use distinct to remove duplicates from data sets</p>"},{"location":"content/compose/enlist.html","title":"Enlist <code>enlist</code>","text":"<p>Creates a list from multiple arguments, folding into a vector if all arguments have the same type.</p> <pre><code>\u21aa (enlist 1 2 3)\n[1 2 3]\n\u21aa (enlist 1 2 [3 4])\n(\n  1\n  2\n  [3 4]\n)\n\u21aa (enlist 1 2 \"asd\")\n(\n  1\n  2\n  asd\n)\n</code></pre> <p>Info</p> <ul> <li>Creates a vector if all arguments are of the same type</li> <li>Creates a list if arguments have different types</li> <li>Preserves nested structures</li> </ul> <p>Tip</p> <p>Use enlist when you need to combine multiple values into a single collection</p>"},{"location":"content/compose/group.html","title":"Group <code>group</code>","text":"<p>Accepts a list and return a dictionary with the keys as distinct elements of the list and the values as the indexes of the elements in the list.</p> <pre><code>\u21aa (group [1 2 3 1 2 3 4 5 6 7 8 9 0])\n{\n  0: [9]\n  1: [0 3]\n  2: [1 4]\n  3: [2 5]\n  4: [6]\n  5: [7]\n  6: [8]\n  7: [9]\n  8: [10]\n  9: [11]\n}\n</code></pre>"},{"location":"content/compose/guid.html","title":"Guid <code>guid</code>","text":"<p>Generates a list of unique identifiers.</p> <pre><code>\u21aa (guid 2)\n[f162feeb-9a43-4168-9a5b-0bb362361a22 58a0c91a-6ece-4df0-8b1d-edc47553017f]\n</code></pre> <p>Info</p> <ul> <li>Takes an i64 number as input specifying how many GUIDs to generate</li> <li>Returns a vector of unique GUIDs</li> <li>Each GUID is guaranteed to be unique</li> </ul> <p>Tip</p> <p>Useful for generating unique identifiers for database records or distributed systems</p>"},{"location":"content/compose/list.html","title":"List <code>list</code>","text":"<p>Creates a heterogeneous list from the provided arguments.</p> <pre><code>\u21aa (list 1 2 3)\n(\n  1\n  2\n  3\n)\n\u21aa (list 1 2 [3 4])\n(\n  1\n  2\n  [3 4]\n)\n</code></pre> <p>Info</p> <ul> <li>Always creates a list, never folds into a vector</li> <li>Preserves nested data structures</li> <li>Can hold elements of different types</li> </ul> <p>Tip</p> <p>Use list when you specifically need a heterogeneous collection</p>"},{"location":"content/compose/rand.html","title":"Rand <code>rand</code>","text":"<p>Generates random numbers within a specified range.</p> <pre><code>\u21aa (rand 5 10)\n[7 3 6 4 9]\n\u21aa (rand 5 100)\n[23 45 67 89 12]\n</code></pre> <p>Info</p> <ul> <li>First argument: number of random elements to generate</li> <li>Second argument: maximum value (exclusive)</li> <li>Generated numbers are integers from 0 to max-1</li> </ul> <p>Tip</p> <p>Useful for generating test data or implementing randomized algorithms</p>"},{"location":"content/compose/reverse.html","title":"Reverse <code>reverse</code>","text":"<p>Reverses the order of elements in a list or array.</p> <pre><code>\u21aa (reverse [1 2 3 4 5])\n[5 4 3 2 1]\n</code></pre> <p>Info</p> <ul> <li>Works with both arrays and lists</li> <li>Preserves the original data type (array stays array, list stays list)</li> <li>Returns a new collection, doesn't modify the original</li> </ul> <p>Tip</p> <p>Use reverse when you need to process elements in reverse order</p>"},{"location":"content/compose/table.html","title":"Table <code>table</code>","text":"<p>Creates a table from column names and values.</p> <pre><code>\u21aa (table [A B C] (list (til 5) [6 7 8 9 0] (list \"A\" \"B\" \"C\" \"D\" \"E\")))\n\u250c\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 A  \u2502 B  \u2502 C                            \u2502\n\u251c\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 0  \u2502 6  \u2502 A                            \u2502\n\u2502 1  \u2502 7  \u2502 B                            \u2502\n\u2502 2  \u2502 8  \u2502 C                            \u2502\n\u2502 3  \u2502 9  \u2502 D                            \u2502\n\u2502 4  \u2502 0  \u2502 E                            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 5 rows (5 shown) 3 columns (3 shown)   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Info</p> <ul> <li>First argument: vector of column names (symbols)</li> <li>Second argument: list of column values</li> <li>All columns must have the same length</li> </ul> <p>Warning</p> <p>Column names must be unique and values must have matching lengths</p> <p>Tip</p> <p>Tables are useful for organizing and analyzing structured data</p>"},{"location":"content/compose/til.html","title":"Til <code>til</code>","text":"<p>Generates a sequence of integers from 0 to n-1.</p> <pre><code>\u21aa (til 5)\n[0 1 2 3 4]\n</code></pre> <p>Info</p> <ul> <li>Takes a single integer argument n</li> <li>Returns a vector of integers [0, 1, ..., n-1]</li> <li>Always starts from 0</li> </ul> <p>Tip</p> <p>Useful for generating index sequences or creating numeric ranges</p>"},{"location":"content/control/do.html","title":"Do <code>do</code>","text":"<p>Evaluates the given expressions list and returns the value of the last one.</p> <pre><code>\u21aa (do 1 2 3)\n3\n\u21aa (do (let c (+ 1 2)) 6 (+ c 5))\n8\n</code></pre>"},{"location":"content/control/exit.html","title":"Exit <code>exit</code>","text":"<p><code>exit</code> is a control flow function that exits the current rayforce process with code passed as an argument (optional).</p> <pre><code>\u21aa (exit 1)\n</code></pre> <pre><code>\u21aa (exit 0)\n</code></pre> <pre><code>\u21aa (exit)\n</code></pre>"},{"location":"content/control/if.html","title":"If <code>if</code>","text":"<p>Control flow function that evaluates a condition and executes a block of code if the condition is true.</p> <pre><code>\u21aa (if true (print \"true\") (print \"false\"))\ntrue\n\u21aa (if false (print \"true\") (print \"false\"))\nfalse\n\u21aa (if 1 3)\n3\n\u21aa (if 0 3)\n</code></pre>"},{"location":"content/control/raise.html","title":"Raise <code>raise</code>","text":"<p>The <code>raise</code> statement allows you to raise an exception. Accepts string as an argument.</p> <pre><code>\u21aa (raise \"My exception\")\n\u2022\u2022 [E017] error: raised error\n\u256d\u2500[0]\u2500\u252c repl:1..1 in function: @anonymous\n\u2502 1   \u2502 (raise \"My exception\")\n\u2502     \u2534        \u203e\u203e\u203e\u203e\u203e\u203e\u203e\u203e\u203e\u203e\u203e\u203e\u203e\u203e My exception\n</code></pre>"},{"location":"content/control/return.html","title":"Return <code>return</code>","text":"<p>The <code>return</code> statement is used to return a value from a function. The value can be any data type.</p> <pre><code>\u21aa (set add (fn [a b] (return (+ a b))) 77)\n\u21aa (add 1 2)\n3\n</code></pre>"},{"location":"content/control/try.html","title":"Try <code>try</code>","text":"<p><code>try</code> is a control structure that allows you to handle exceptions in a more controlled way. It accepts two arguments: the expression to be evaluated and an expression to be evaluated in case of an exception.</p> <pre><code>\u21aa (try (raise \"A\") 1)\n1\n&gt;(try (raise \"A\") (fn [x] x))\n\"A\"\n</code></pre>"},{"location":"content/env/env.html","title":"Env <code>env</code>","text":"<p>The function to return environment dictionary.</p> <pre><code>\u21aa (set add (fn [a b] (return (+ a b)) 77))\n\u21aa (set a 1)\n\u21aa (set b [1 2 3 4])\n\u21aa (env)\n{\n  add: @add\n  a: 1\n  b: [1 2 3 4]\n}\n</code></pre>"},{"location":"content/env/let.html","title":"Let <code>let</code>","text":"<p><code>let</code> is a special form that allows you to define local variables. It is used to create a new variable and assign a value to it. The variable is only available within the scope of the <code>let</code> form.</p> <pre><code>\u21aa (do (let a 123) (+ a 1))\n124\n&gt; a\n\u2022\u2022 [E003] error: object evaluation failed\n\u256d\u2500[0]\u2500\u252c repl:1..1 in function: @anonymous\n\u2502 1   \u2502 a\n\u2502     \u2534 \u203e undefined symbol: 'a\n</code></pre> <p>In the example above, the variable <code>a</code> is defined within the <code>let</code> form and is not available outside of it.</p> <p><code>let</code> can also be used to define local variables inside a function body.</p> <pre><code>\u21aa (set add (fn [a b] (let c (+ a b)) c))\n\u21aa (add 1 2)\n3\n</code></pre>"},{"location":"content/env/memstat.html","title":"Memstat <code>memstat</code>","text":"<p>Returns memory statistics for the current Rayforce process.</p> <pre><code>\u21aa (memstat)\n{\n  msys: 67338240\n  heap: 67108864\n  free: 652\n  syms: 177\n}\n</code></pre>"},{"location":"content/env/set.html","title":"Set <code>set</code>","text":"<p><code>set</code> is being used for various purposes in the language. It can be used to define a new variable, assign a value to an existing variable, or to update a variable. Another important usecase of <code>set</code> is to save inmemory data onto the disk.</p> <pre><code>\u21aa (set x 123)\n123\n\u21aa x\n123\n\u21aa (set \"/tmp/v.dat\" [1 2 3])\n\"/tmp/v.dat\"\n\u21aa (get \"/tmp/v.dat\")\n[1 2 3]\n</code></pre>"},{"location":"content/format/format.html","title":"Format <code>format</code>","text":"<p>Accepts any Rayforce object and returns a string representation of it.</p> <pre><code>\u21aa (format 1)\n\"1\"\n\u21aa (format \"% %\" 1 3)\n\"1 3\"\n\u21aa (format \"% %\" 1 [1 2 3])\n\"1 [1 2 3]\"\n</code></pre>"},{"location":"content/format/print.html","title":"Print <code>print</code>","text":"<p><code>print</code> prints formatted value to a output without a newline.</p> <pre><code>\u21aa (print \"% %\" 1 [2 3 4])\n1 [2 3 4]\n</code></pre>"},{"location":"content/format/println.html","title":"Println <code>println</code>","text":"<p><code>println</code> prints formatted value to a output with a newline.</p> <pre><code>\u21aa (println \"% %\" 1 [2 3 4])\n1 [2 3 4]\n</code></pre>"},{"location":"content/format/show.html","title":"Show <code>show</code>","text":"<p>Prints the full object into a console without a care of terminal dimensions.</p> <pre><code>\u21aa (show (til 100))\n[0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99]\n</code></pre>"},{"location":"content/getstarted/install.html","title":"Install","text":"<p>There are two ways to install RayforceDB:</p> <ul> <li>Download a pre-built binary</li> <li>Build from source</li> </ul>"},{"location":"content/getstarted/install.html#download-a-pre-built-binary","title":"Download a pre-built binary","text":"<p>Refer to a release page</p>"},{"location":"content/getstarted/install.html#building-from-source","title":"Building from source","text":"<p>These OSes are supported (for now):</p> <ul> <li>Linux</li> <li>Windows</li> <li>MacOS</li> </ul>"},{"location":"content/getstarted/install.html#linux","title":"Linux","text":""},{"location":"content/getstarted/install.html#requirements","title":"Requirements","text":"<ul> <li>Git</li> <li>GNU Make</li> <li>GCC or Clang</li> </ul> <pre><code>git clone https://github.com/singaraiona/rayforce\ncd rayforce\nmake release\nrlwrap ./rayforce -f examples/table.rfl\n</code></pre>"},{"location":"content/getstarted/install.html#windows","title":"Windows","text":""},{"location":"content/getstarted/install.html#requirements_1","title":"Requirements","text":"<ul> <li>Git</li> <li>MinGW</li> <li>TDM-GCC</li> </ul> <pre><code>git clone https://github.com/singaraiona/rayforce\ncd rayforce\nmingw32-make.exe CC=\"gcc\" LIBS=\"-lm -lws2_32 -lkernel32\" release \n./rayforce.exe -f examples/table.rfl\n</code></pre>"},{"location":"content/getstarted/install.html#macos","title":"MacOS","text":"<ul> <li>Git</li> <li>GNU Make</li> <li>GCC or Clang</li> </ul> <pre><code>git clone https://github.com/singaraiona/rayforce\ncd rayforce\nmake release\nrlwrap ./rayforce -f examples/table.rfl\n</code></pre>"},{"location":"content/getstarted/install.html#tests","title":"Tests","text":"<p>Tests are under tests/ directory. To run tests:</p> <pre><code>make clean &amp;&amp; make tests\n</code></pre>"},{"location":"content/getstarted/tutorial.html","title":"Tutorial","text":""},{"location":"content/getstarted/tutorial.html#getting-started","title":"Getting Started","text":""},{"location":"content/getstarted/tutorial.html#basic-operations","title":"Basic Operations","text":"<p>Let's start with some basic arithmetic operations:</p> <pre><code>;; Basic arithmetic\n\u21aa (+ 1 2)\n3\n\n;; Multiple operations\n\u21aa (* (+ 2 3) 4)\n20\n\n;; Integer part of division\n\u21aa (/ -10 3)\n-3\n\n;; Remainder from division\n\u21aa (% 5 -3)\n-2\n\n;; Division with decimals\n\u21aa (/ 10 3)\n3.33\n</code></pre>"},{"location":"content/getstarted/tutorial.html#variables","title":"Variables","text":"<p>Variables are created using <code>set</code>:</p> <pre><code>;; Assign a value\n\u21aa (set x 42)\n42\n\n;; Use the variable\n\u21aa (+ x 10)\n52\n\n;; Multiple assignments\n\u21aa (set y (+ x 5))\n47\n</code></pre>"},{"location":"content/getstarted/tutorial.html#working-with-collections","title":"Working with Collections","text":""},{"location":"content/getstarted/tutorial.html#vectors","title":"Vectors","text":"<p>Vectors are homogeneous collections (all elements must be the same type):</p> <pre><code>;; Create a vector of numbers\n\u21aa (set numbers [1 2 3 4 5])\n[1 2 3 4 5]\n\n;; Vector operations\n\u21aa (* numbers 2)  ;; Multiply each element by 2\n[2 4 6 8 10]\n\n;; Aggregations\n\u21aa (avg numbers)\n3.00\n\u21aa (sum numbers)\n15\n</code></pre>"},{"location":"content/getstarted/tutorial.html#lists-and-strings","title":"Lists and Strings","text":"<p>Lists can contain mixed types, and strings must be created using lists:</p> <pre><code>;; Create a list of strings\n\u21aa (set names (list \"Alice\" \"Bob\" \"Charlie\"))\n(\n  Alice\n  Bob\n  Charlie\n)\n\n\n;; Mixed type list\n\u21aa (set data (list 1 \"two\" [3 4 5]))\n(\n  1\n  two\n  [3 4 5]\n)\n</code></pre>"},{"location":"content/getstarted/tutorial.html#working-with-tables","title":"Working with Tables","text":"<p>Tables are the primary data structure for data analysis:</p> <pre><code>;; Create a simple table\n\u21aa (set employees (table [name dept salary]\n                       (list (list \"Alice\" \"Bob\" \"Charlie\")\n                            ['IT 'HR 'IT]\n                            [75000 65000 85000])))\n\n;; Display the table\n\u21aa employees\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 name    \u2502 dept \u2502 salary              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Alice   \u2502 IT   \u2502 75000               \u2502\n\u2502 Bob     \u2502 HR   \u2502 65000               \u2502\n\u2502 Charlie \u2502 IT   \u2502 85000               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 3 rows (3 shown) 3 columns (3 shown) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n;; Query the table\n\u21aa (select {name: name\n           avg_salary: (avg salary)\n           from: employees\n           by: dept})\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 dept \u2502 name            \u2502 avg_salary          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 IT   \u2502 (Alice Charlie) \u2502 80000.00            \u2502\n\u2502 HR   \u2502 (Bob)           \u2502 65000.00            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 2 rows (2 shown) 3 columns (3 shown)         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"content/getstarted/tutorial.html#working-with-time","title":"Working with Time","text":"<p>Rayforce has built-in support for temporal data:</p> <pre><code>;; Get current timestamp\n\u21aa (set now (timestamp 'local))\n2025.03.03D16:41:57.668734712\n\n;; Extract components\n;; TODO\n\u21aa (as 'date now)\n2025.03.03\n\u21aa (as 'time now)\n16:41:57.668\n\n;; Date arithmetic\n\u21aa (+ 2024.03.15 7)  ;; Add 7 days\n2024.03.22\n</code></pre>"},{"location":"content/getstarted/tutorial.html#functions","title":"Functions","text":"<p>Create reusable code with functions:</p> <pre><code>;; Define a simple function\n\u21aa (set double (fn [x] (* x 2)))\n\u21aa (double 21)\n42\n\n;; Function with multiple arguments\n\u21aa (set salary-increase (fn [amount pct]\n                         (+ amount (* amount (div pct 100)))))\n\u21aa (salary-increase 50000 10)  ;; 10% increase\n55000\n\n;; Function with multiple expressions\n\u21aa (set process-data (fn [data]\n                      (set doubled (* data 2))\n                      (set summed (sum doubled))\n                      (/ summed (count data))))\n\u21aa (process-data [1 2 3 4 5])\n6\n</code></pre>"},{"location":"content/getstarted/tutorial.html#error-handling","title":"Error Handling","text":"<p>Handle errors gracefully with try/catch:</p> <pre><code>;; Basic error handling\n\u21aa (try\n     (+ 1 'symbol)\n     (fn [x] x))\n\"add: unsupported types: 'i64, 'symbol\"\n\n;; Error handling in functions\n\u21aa (set safe-divide (fn [x y]\n                     (try\n                       (+ x 'invalid)\n                       (fn [msg] \n                           (list \"Error:\" msg)))))\n@safe-divide              \n\u21aa (safe-divide 10 null)\n(\n  Error:\n  add: unsupported types: 'i64, 'symbol\n)\n\u21aa\n</code></pre>"},{"location":"content/getstarted/tutorial.html#working-with-files","title":"Working with Files","text":"<p>Load and save data:</p> <pre><code>;; Save string to file\n\u21aa (set \"calculations.rf\" \"(+ 1 2)\")\n\n;; Load and execute code\n\u21aa (eval (get \"calculations.rf\"))\n3\n</code></pre>"},{"location":"content/getstarted/tutorial.html#performance-tips","title":"Performance Tips","text":""},{"location":"content/getstarted/tutorial.html#profiling-code","title":"Profiling Code","text":"<p>Use <code>timeit</code> to measure performance:</p> <pre><code>;; Measure execution time\n\u21aa (timeit (sum [1 2 3 4 5]))\n0.015  ;; Time in milliseconds\n\n\u21aa (timeit (set t (load \"./examples/table.rfl\")))\n2544.45\n\n\u21aa :t 1\n. Timeit is on.\n\u21aa (select {from: t by: Timestamp p: (first OrderId) s: (sum Price)})\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Timestamp                     \u2502 p                                    \u2502 s            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 2000.01.01D00:00:00.000000000 \u2502 8f8e1595-9a9b-40b9-94aa-313167e5ae91 \u2502 0.00         \u2502\n\u2502 2000.01.01D00:00:00.000000001 \u2502 8a254305-a53a-4275-912a-7c8049734fdb \u2502 1.00         \u2502\n\u2502 2000.01.01D00:00:00.000000002 \u2502 ea2b5b2d-ffe2-45a3-b866-78f8b9a4c19a \u2502 2.00         \u2502\n\u2502 2000.01.01D00:00:00.000000003 \u2502 9bee0d43-dbce-436a-9211-a5ecdda227a3 \u2502 3.00         \u2502\n\u2502 2000.01.01D00:00:00.000000004 \u2502 467292b7-c071-4b2a-b47e-ae6dd1aad1b4 \u2502 4.00         \u2502\n\u2502 2000.01.01D00:00:00.000000005 \u2502 530b3339-8312-4e86-a38f-96495be57ca2 \u2502 5.00         \u2502\n\u2502 2000.01.01D00:00:00.000000006 \u2502 6b0d6b67-8ba6-4bdf-8ae4-a3e43561f1f4 \u2502 6.00         \u2502\n\u2502 2000.01.01D00:00:00.000000007 \u2502 8de8050f-f5fc-4fe8-b1b9-76101834ea59 \u2502 7.00         \u2502\n\u2502 2000.01.01D00:00:00.000000008 \u2502 6d1f4b29-491f-49d0-917c-72f2b90866e0 \u2502 8.00         \u2502\n\u2502 2000.01.01D00:00:00.000000009 \u2502 2b97d285-7eb0-49b2-b54f-87cab53e3e3c \u2502 9.00         \u2502\n\u2506 \u2026                             \u2506 \u2026                                    \u2506 \u2026            \u2506\n\u2502 2000.01.01D00:00:00.009999990 \u2502 b659d7a2-a542-4636-90e4-9dbc0d75f362 \u2502 9.999990e+06 \u2502\n\u2502 2000.01.01D00:00:00.009999991 \u2502 e40317c5-ea0b-4fdb-881b-3b414307d198 \u2502 9.999991e+06 \u2502\n\u2502 2000.01.01D00:00:00.009999992 \u2502 ed64c465-530d-4963-9fc3-7e6cacbf3444 \u2502 9.999992e+06 \u2502\n\u2502 2000.01.01D00:00:00.009999993 \u2502 66f43b77-ada8-476b-97cd-6e8a676b1f69 \u2502 9.999993e+06 \u2502\n\u2502 2000.01.01D00:00:00.009999994 \u2502 c3fae9b6-3335-4de2-852a-a2632f4f239d \u2502 9.999994e+06 \u2502\n\u2502 2000.01.01D00:00:00.009999995 \u2502 9a852a12-6640-42d3-8413-c3121cc4297f \u2502 9.999995e+06 \u2502\n\u2502 2000.01.01D00:00:00.009999996 \u2502 ed40dc0b-79e3-4a70-a8c2-39054f5fe35e \u2502 9.999996e+06 \u2502\n\u2502 2000.01.01D00:00:00.009999997 \u2502 fa11edee-0f5f-41b0-adcc-c7c605730115 \u2502 9.999997e+06 \u2502\n\u2502 2000.01.01D00:00:00.009999998 \u2502 dbfcb56e-a0f5-4e05-91f6-177571fdc471 \u2502 9.999998e+06 \u2502\n\u2502 2000.01.01D00:00:00.009999999 \u2502 2d33b7dc-51e3-4e43-ab66-503c3afc2523 \u2502 9.999999e+06 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 10000000 rows (20 shown) 3 columns (3 shown)                                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u256d top-level\n\u2502 \u2022  parse: 0.01 ms\n\u2502 \u256d select\n\u2502 \u2502 \u2022  fetch table: 0.00 ms\n\u2502 \u2502 \u256d group\n\u2502 \u2502 \u2502 \u2022  get keys: 0.00 ms\n\u2502 \u2502 \u2502 \u2022  index scope: 1.56 ms\n\u2502 \u2502 \u2502 \u2022  index group scoped perfect: 25.12 ms\n\u2502 \u2502 \u2502 \u2022  build index: 0.00 ms\n\u2502 \u2502 \u2502 \u2022  apply 'first' on group columns: 26.80 ms\n\u2502 \u2502 \u2570\u2500\u2524 53.49 ms\n\u2502 \u2502 \u2022  apply mappings: 77.63 ms\n\u2502 \u2502 \u2022  build table: 0.03 ms\n\u2502 \u2570\u2500\u2524 131.19 ms\n\u2570\u2500\u2524 131.21 ms\n\u21aa :t 0\n. Timeit is off.\n</code></pre>"},{"location":"content/getstarted/tutorial.html#memory-management","title":"Memory Management","text":"<p>Monitor and manage memory:</p> <pre><code>;; Check memory stats\n\u21aa (memstat)\n\n;; Force garbage collection\n\u21aa (gc)\n</code></pre>"},{"location":"content/getstarted/tutorial.html#next-steps","title":"Next Steps","text":"<ul> <li>Explore the Reference for complete function documentation</li> <li>Check the FAQ for common questions</li> <li>Join the community and share your experience </li> </ul>"},{"location":"content/interfacing/ipc.html","title":"IPC","text":"<p>Warning</p> <p>For now it is unsatable and possible subject of changes in the future!</p> <p>A RayforceDB can communicate with other RayforceDBs via IPC. It is a very fast and efficient way of communication. It is used to send data between RayforceDBs, to send data to the client, and to send data to the server.</p>"},{"location":"content/interfacing/ipc.html#listen-to-a-port","title":"Listen to a port","text":"<p>To start a Rayforce process that listens to a port, use the <code>-p</code> flag:</p> <pre><code>&gt; rayforce -p 5110\n</code></pre>"},{"location":"content/interfacing/ipc.html#connect-to-a-remote-process","title":"Connect to a remote process","text":"<p>To connect to a port call <code>hopen</code> function:</p> <pre><code>(set h (hopen \"127.0.0.1:5110\"))\n</code></pre> <p>Now, you can send data to the remote process:</p> <pre><code>\u21aa (write h \"(+ 1 2)\")\n3\n\u21aa (write h (list (+ 1 2)))\n3\n</code></pre>"},{"location":"content/interfacing/ipc.html#message-format","title":"Message format","text":"<p>There are two ways of sending ipc messages: string or list. In case of string it will be parsed an evaluated then, in case of list it will be evaluated as is.</p> <p>Note</p> <p>Do not forget to call hclose for any unused connection handle!</p> <pre><code>(hclose h)\n</code></pre> <p>There are 3 types of messages:</p> <ul> <li>Sync (request)</li> <li>Response</li> <li>Async</li> </ul>"},{"location":"content/interfacing/ipc.html#sync","title":"Sync","text":"<p>Sync messages are used to send a request and get a response. Sync messages are blocking, so the sender will wait for the response.</p> <pre><code>\u21aa (write h \"(+ 1 2)\")\n3\n</code></pre>"},{"location":"content/interfacing/ipc.html#response","title":"Response","text":"<p>Response messages are used to send a response to a sync message. Response messages are implicitly sent by the receiver of a sync message.</p>"},{"location":"content/interfacing/ipc.html#async","title":"Async","text":"<p>Async messages are used to send a message without waiting for a response. Async messages are not blocking, so the sender will not wait for the response. To send an async message, use negate for a connection handle with a <code>write</code> function:</p> <pre><code>\u21aa (write (neg h) (list (+ 1 2)))\n</code></pre>"},{"location":"content/interfacing/ipc.html#protocol","title":"Protocol","text":"<p>The protocol is very simple. One just utilizes serialization to send/receive messages. Just one addition is: handshake. It is used to negotiate the protocol version and to send the credentials (if any).</p>"},{"location":"content/interfacing/ipc.html#handshake","title":"Handshake","text":"<p>After a client has opened a connection to a server, the first message sent by the client is a handshake message. It is a simple null-terminated ASCII string followed by a version number byte of next format: [\"username:password\"]v</p> <p>Version is ancoded as follows:</p> <pre><code>(RAYFORCE_MAJOR_VERSION &lt;&lt; 3 | RAYFORCE_MINOR_VERSION)\n</code></pre>"},{"location":"content/interfacing/loadfn.html","title":"Load a function from the shared library <code>loadfn</code>","text":"<p>Somethimes it is necessary to create a plugin when current functionality is not enough. In this case, you can use the <code>loadfn</code> function to load a function from a shared library.</p> <p>First, you need to create a shared library with the function you want to use. For example, let's create a shared library with a function that adds two numbers:</p> <pre><code>#include &lt;stdio.h&gt;\n#include \"../core/rayforce.h\"\n\nobj_p myfn(obj_p a, obj_p b) {\n    if (is_null(a) || is_null(b))\n        return null(0);\n\n    if (a-&gt;type != -TYPE_I64 || b-&gt;type != -TYPE_I64)\n        return error(ERR_TYPE, \"Expected two i64 arguments, found: '%s, '%s\", type_name(a-&gt;type), type_name(b-&gt;type));\n\n    return i64(a-&gt;i64 + b-&gt;i64);\n}\n</code></pre> <p>Then, let's create the Makefile with the following content:</p> <pre><code>CC = clang\nTARGET = libexample.so\nCFLAGS = -fPIC -Wall -Wextra -std=c17 -Ofast -march=native -fassociative-math -ftree-vectorize\\\n -fno-math-errno -funsafe-math-optimizations -ffinite-math-only -funroll-loops -m64\n\ndefault:\n    $(CC) $(CFLAGS) -shared -fPIC -I../core -o $(TARGET) example.c\n\nclean:\n    rm -f $(TARGET)\n</code></pre> <p>After that, you can compile the shared library with the following command:</p> <pre><code>make\n</code></pre> <p>Now, you can use the <code>loadfn</code> function to load the function from the shared library:</p> <pre><code>\u21aa (set f (loadfn \"ext/libexample.so\" \"myfn\" 2))\n@fn\n\u21aa (f 1 2)\n3\n\u21aa (f 1 0Ni)\n\u2022\u2022 [E005] error: type mismatch\n\u256d\u2500[0]\u2500\u252c repl:1..1 in function: @anonymous\n\u2502 1   \u2502 (f 1 0Ni)\n\u2502     \u2534 \u203e\u203e\u203e\u203e\u203e\u203e\u203e\u203e\u203e Expected two i64 arguments, found: 'i64, 'i32\n</code></pre>"},{"location":"content/io/get.html","title":"Get <code>get</code>","text":"<p>Accepts a symbol and returns the value of the env variable named by the symbol.</p> <pre><code>\u21aa (set a 1)\n1\n\u21aa (get 'a)\n1\n</code></pre> <p>Or load an object, stored in a disk file, into memory.</p> <pre><code>\u21aa (set \"/tmp/vec\" (til 10))\n\"/tmp/vec\"\n\u21aa (get \"/tmp/vec\")\n[0 1 2 3 4 5 6 7 8 9]\n</code></pre>"},{"location":"content/io/get_parted.html","title":"Load parted table <code>get-parted</code>","text":"<p>Accepts two arguments: string path to a parted tables root and a symbol name of a table. </p> <pre><code>(set t (get-parted \"/tmp/db/\" 'tab))\n</code></pre>"},{"location":"content/io/get_splayed.html","title":"Load splayed table <code>get-splayed</code>","text":"<p>Accepts two arguments: string path to a splayed table and a string path to a symfile of the table. </p> <pre><code>(set t (get-splayed \"/tmp/db/tab/\" \"/tmp/db/tab.sym\"))\n</code></pre> <p>Second argument is optional. If provided, it will be used as the symfile. Otherwise, the symfile will be inferred from the path to the table.</p> <pre><code>(set t (get-splayed \"/tmp/db/tab/\"))\n</code></pre> <p>Tip</p> <p>Pay attention to the trailing slash in the path to the table. It is required.</p>"},{"location":"content/io/hclose.html","title":"Close handle <code>hclose</code>","text":"<p>Closes a handle opened with hopen.</p> <pre><code>\u21aa (hclose h)\n</code></pre>"},{"location":"content/io/hopen.html","title":"Hopen <code>hopen</code>","text":"<p>Open a IO handle to a remote process or to a journal log.</p>"},{"location":"content/io/hopen.html#ipc","title":"IPC:","text":"<pre><code>\u21aa (hopen h \"127.0.0.1:5100\")\n(write h \"Hello, world!\")\n</code></pre>"},{"location":"content/io/hopen.html#journal","title":"Journal:","text":"<pre><code>\u21aa (hopen h \"/tmp/log\")\n(write h \"Hello, world!\")\n</code></pre>"},{"location":"content/io/read.html","title":"Read <code>read</code>","text":"<p>Reads a file into a string.</p> <pre><code>(read \"/tmp/data\")\n</code></pre>"},{"location":"content/io/read_csv.html","title":"Read CSV file <code>read-csv</code>","text":"<p>Reads a CSV file into a table. Accepts two arguments: vector of symbols representing column types and a string path to a CSV file.</p> <pre><code>(set t (read-csv [I64 I64 Symbol Timestamp] \"/tmp/data.csv\"))\n</code></pre>"},{"location":"content/io/set_splayed.html","title":"Set splayed <code>set-splayed</code>","text":"<p>Store a table as a splayed table into a disk.</p> <pre><code>(set-splayed \"/tmp/db/tab/\" t)\n</code></pre> <p>Where <code>t</code> is a table.</p> <p>Optionally accepts a string path to a symfile of the table.</p> <pre><code>(set-splayed \"/tmp/db/tab/\" t \"/tmp/db/sym\")\n</code></pre>"},{"location":"content/items/at.html","title":"At <code>at</code>","text":"<p>The <code>at</code> function returns the element at the specified index.</p> <pre><code>\u21aa (at [1 2 3 4 5] 2)\n3\n(at (dict [a b c] (list [1 2] [3 4] [5 6])) 'b)\n[3 4]\n</code></pre>"},{"location":"content/items/enum.html","title":"Enum <code>enum</code>","text":"<p>Enumerates one symbol vector over another.</p> <pre><code>\u21aa (set a [a b c])\n[a b c]\n\u21aa (enum 'a [a b c a c c c c a])\n'a#[a b c a c c c c a]\n</code></pre> <p>Useful for saving space when storing repeated symbols and for splayed tables with symbolic columns.</p>"},{"location":"content/items/except.html","title":"Except <code>except</code>","text":"<p><code>except</code> returns the items in the first list that are not in the second list.</p> <pre><code>(except [1 2 3 4 5] [2 4])\n[1 3 5]\n</code></pre>"},{"location":"content/items/filter.html","title":"Filter <code>filter</code>","text":"<p>Filter a list by a bolean vector mask.</p> <pre><code>(filter [1 2 3 4 5] [true false true false true])\n[1 3 5]\n</code></pre>"},{"location":"content/items/find.html","title":"Find <code>find</code>","text":"<p><code>find</code> is a function that returns the index of the first occurrence of a value in a list.</p> <pre><code>(find [1 2 3 4 5] 3)\n2\n(find [1 2 3 4 5] 6)\n0Nl\n</code></pre>"},{"location":"content/items/first.html","title":"First <code>first</code>","text":"<p><code>first</code> is a function that returns the first item in a list.</p> <pre><code>(first [1 2 3 4 5])\n1\n</code></pre>"},{"location":"content/items/in.html","title":"In <code>in</code>","text":"<p>This is a test function that returns a boolean value if the first argument is in the second argument.</p> <pre><code>\u21aa (in [1 2 3 4 5] [1 2])\n[true true false false false]\n</code></pre>"},{"location":"content/items/key.html","title":"Key <code>key</code>","text":"<p>Returns a key for mappable objects like dict or table, otherwise return the value itself.</p> <pre><code>\u21aa (key [1 2])\n[1 2]\n\u21aa (key (dict [a b] [1 2]))\n[a b]\n</code></pre>"},{"location":"content/items/last.html","title":"Last <code>last</code>","text":"<p><code>last</code> returns the last element of a list.</p> <pre><code>(last [1 2 3 4 5])\n5\n</code></pre>"},{"location":"content/items/sect.html","title":"Sect <code>sect</code>","text":"<p>Return the intersection of two lists.</p> <pre><code>(sect [1 2 3 4 5] [3 4 5 6 7])\n[3 4 5]\n</code></pre>"},{"location":"content/items/take.html","title":"Take <code>take</code>","text":"<p><code>take</code> returns the first <code>n</code> elements of a list.</p> <pre><code>(take 3 [1 2 3 4 5])\n[1 2 3]\n</code></pre> <p>If the second argument is atom, it will repeat the first argument <code>n</code> times.</p> <pre><code>(take 3 1)\n[1 1 1]\n</code></pre>"},{"location":"content/items/union.html","title":"Union <code>union</code>","text":"<p><code>union</code> returns the union of two lists.</p> <pre><code>\u21aa (union [1 2 3] [4 5 6])\n[1 2 3 4 5 6]\n</code></pre>"},{"location":"content/items/value.html","title":"Value <code>value</code>","text":"<p>Returns the value of a key in a mappable object like a dict or table, otherwise return the value itself.</p> <pre><code>(value [1 2])\n[1 2]\n(value (dict [a b] [1 2]))\n[1 2]\n</code></pre>"},{"location":"content/items/where.html","title":"Where <code>where</code>","text":"<p>Returns vector of indices where the elements of a boolean vector are true.</p> <pre><code>(where [true false true])\n[0 2]\n</code></pre>"},{"location":"content/items/within.html","title":"Within <code>within</code>","text":"<p><code>within</code> is a function that returns a boolean list indicating whether the elements of the first list are within the corresponding elements of the second list.</p> <pre><code>(within 6 [1 20])\n[true]\n\u21aa (within [1 2 3] [1 100])\n[true true true]\n</code></pre>"},{"location":"content/iter/apply.html","title":"Apply <code>apply</code>","text":"<p>Applies a function to each element of a list.</p> <pre><code>\u21aa (apply (fn [x y] (+ x y)) 1 [1 2 34])\n[2 3 35]\n\u21aa (apply (fn [x y] (+ x y)) [1 2 3] [4 5 6])\n[5 7 9]\n</code></pre>"},{"location":"content/join/inner_join.html","title":"Inner Join <code>inner-join</code>","text":"<p>Performs an inner join between two tables based on matching key columns.</p> <pre><code>;; Create sample tables\n\u21aa (set x (table [a b c d] \n    (list (list \"aaaaaa\" \"bbbbbbbbbb\" \"cc\" \"dd\")\n          ['I 'J 'K 'I] \n          [0 1 2 3]\n          [0 1 2 3])))\n\n\u21aa (set y (table [a b c d e] \n    (list (list \"aa\" \"bb\" \"cc\" \"dd\" \"ee\")\n          ['I 'J 'K 'I 'J]\n          [0 1 2 3 4]\n          [0 1 2 3 4]\n          [0 1 2 3 4])))\n\n;; Inner join on single column\n\u21aa (inner-join [a] x y)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2510\n\u2502 a    \u2502 b \u2502 c \u2502 d \u2502 e \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2524\n\u2502 cc   \u2502 K \u2502 2 \u2502 2 \u2502 2 \u2502\n\u2502 dd   \u2502 I \u2502 3 \u2502 3 \u2502 3 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2518\n\n;; Inner join on multiple columns\n\u21aa (inner-join [a b] x y)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2510\n\u2502 a    \u2502 b \u2502 c \u2502 d \u2502 e \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2524\n\u2502 cc   \u2502 K \u2502 2 \u2502 2 \u2502 2 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2518\n</code></pre> <p>Syntax</p> <p><pre><code>(inner-join columns left-table right-table)\n</code></pre> - <code>columns</code>: Vector of column names to join on - <code>left-table</code>: First table to join - <code>right-table</code>: Second table to join</p> <p>Note</p> <ul> <li>Only keeps rows where the join columns match</li> <li>Rows without matches are excluded</li> <li>Column names from both tables are preserved</li> <li>Join columns must exist in both tables</li> <li>Can join on multiple columns by providing a vector of column names</li> </ul> <p>Tip</p> <p>Use inner join when you only want rows that have matches in both tables</p>"},{"location":"content/join/left_join.html","title":"Left Join <code>left-join</code>","text":"<p>Performs a left join between two tables, keeping all rows from the left table and matching rows from the right table.</p> <pre><code>;; Create sample tables\n\u21aa (set x (table [a b c d] \n    (list (list \"aaaaaa\" \"bbbbbbbbbb\" \"cc\" \"dd\")\n          ['I 'J 'K 'I] \n          [0 1 2 3]\n          [0 1 2 3])))\n\n\u21aa (set y (table [a b c d e] \n    (list (list \"aa\" \"bb\" \"cc\" \"dd\" \"ee\")\n          ['I 'J 'K 'I 'J]\n          [0 1 2 3 4]\n          [0 1 2 3 4]\n          [0 1 2 3 4])))\n\n;; Left join on single column\n\u21aa (left-join [a] x y)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 a          \u2502 b \u2502 c \u2502 d \u2502 e   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 aaaaaa     \u2502 I \u2502 0 \u2502 0 \u2502 null\u2502\n\u2502 bbbbbbbbbb \u2502 J \u2502 1 \u2502 1 \u2502 null\u2502\n\u2502 cc         \u2502 K \u2502 2 \u2502 2 \u2502 2   \u2502\n\u2502 dd         \u2502 I \u2502 3 \u2502 3 \u2502 3   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n\n;; Left join on multiple columns\n\u21aa (left-join [a b] x y)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 a          \u2502 b \u2502 c \u2502 d \u2502 e   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 aaaaaa     \u2502 I \u2502 0 \u2502 0 \u2502 null\u2502\n\u2502 bbbbbbbbbb \u2502 J \u2502 1 \u2502 1 \u2502 null\u2502\n\u2502 cc         \u2502 K \u2502 2 \u2502 2 \u2502 2   \u2502\n\u2502 dd         \u2502 I \u2502 3 \u2502 3 \u2502 null\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Syntax</p> <p><pre><code>(left-join columns left-table right-table)\n</code></pre> - <code>columns</code>: Vector of column names to join on - <code>left-table</code>: First table to join (all rows preserved) - <code>right-table</code>: Second table to join (matching rows only)</p> <p>Note</p> <ul> <li>Keeps all rows from left table</li> <li>Fills missing matches with null</li> <li>Column names from both tables are preserved</li> <li>Join columns must exist in both tables</li> <li>Can join on multiple columns by providing a vector of column names</li> </ul> <p>Tip</p> <p>Use left join when you want to keep all rows from the first table, even if they don't have matches</p>"},{"location":"content/math/add.html","title":"Add <code>+</code>","text":"<p>Makes an addition of it's arguments. Supports such types and their combinations: <code>i64</code>, <code>I64</code>, <code>f64</code>, <code>F64</code>, <code>Timestamp</code>.</p> <pre><code>\u21aa (+ 1 2)\n3\n\u21aa (+ 1.2 2.2)\n3.4\n\u21aa (+ 1 3.4)\n4.4\n\u21aa (+ [1 2 3] 3)\n[4 5 6]\n\u21aa (+ [1 2 3] 3.1)\n[4.1 5.1 6.1]\n\u21aa (+ 3.1 [1 2 3])\n[4.1 5.1 6.1]\n</code></pre>"},{"location":"content/math/avg.html","title":"Average <code>avg</code>","text":"<p>Calculates average value of the vector.</p> <pre><code>\u21aa (avg [1 2 3])\n2\n</code></pre>"},{"location":"content/math/ceil.html","title":"Ceil <code>ceil</code>","text":"<p>Returns a value rounded to the nearest integer greater or equal value</p> <pre><code>\u21aa (ceil 1.5)\n2\n\u21aa (ceil 1.4)\n2\n\u21aa (ceil -1.4)\n-1\n</code></pre>"},{"location":"content/math/dev.html","title":"Standart deviation <code>dev</code>","text":"<p>The <code>dev</code> function returns the standard deviation of a given list of numbers.</p> <pre><code>\u21aa (dev [1 2 3 4 5])\n1.4142135623730951\n\u21aa (dev [1 2 3 4 5 6 7 8 9 10])\n2.8722813232690143\n</code></pre>"},{"location":"content/math/div.html","title":"Div <code>/</code>","text":"<p>Makes a division of it's arguments, takes a quotient. Supports such types and their combinations: <code>i64</code>, <code>I64</code>, <code>f64</code>, <code>F64</code>.</p> <pre><code>\u21aa (/ 1 2)\n0\n\u21aa (/ 1.2 2.2)\n0\n\u21aa (/ 1 3.4)\n0\n\u21aa (/ [1 2 3] 3)\n[0 0 1]\n\u21aa (/ [1 2 3] 2.1)\n[0 0 1]\n\u21aa (/ 3.1 [1 2 3])\n[3 1 1]\n</code></pre>"},{"location":"content/math/fdiv.html","title":"Fdiv <code>div</code>","text":"<p>Makes a division of it's arguments. Supports such types and their combinations: <code>i64</code>, <code>I64</code>, <code>f64</code>, <code>F64</code>.</p> <pre><code>\u21aa (div 1 2)\n0.5\n\u21aa (div 1.2 2.2)\n0.5454545454545454\n\u21aa (div 1 3.4)\n0.29411764705882354\n\u21aa (div [1 2 3] 3)\n[0.3333333333333333 0.6666666666666666 1]\n\u21aa (div [1 2 3] 2.1)\n[0.47619047619047616 0.9523809523809523 1.4285714285714286]\n\u21aa (div 3.1 [1 2 3])\n[3.1 1.55 1.0333333333333334]\n</code></pre>"},{"location":"content/math/floor.html","title":"Floor <code>floor</code>","text":"<p>The <code>floor</code> function returns the largest integer less than or equal to a given number.</p> <pre><code>\u21aa (floor 1.5)\n1\n\u21aa (floor 1.4)\n1\n\u21aa (floor -1.4)\n-2\n</code></pre>"},{"location":"content/math/max.html","title":"Max <code>max</code>","text":"<p>Returns the maximum value of a vector.</p> <pre><code>\u21aa (max [1 2 3])\n3\n</code></pre>"},{"location":"content/math/med.html","title":"Median <code>med</code>","text":"<p>The median is the middle value of a dataset. It is the value that separates the higher half from the lower half of the data. If the dataset has an odd number of values, the median is the middle value. If the dataset has an even number of values, the median is the average of the two middle values.</p> <pre><code>\u21aa (med [1 2 3 4 5])\n3\n\u21aa (med [1 2 3 4 5 6])\n3.5\n</code></pre>"},{"location":"content/math/min.html","title":"Min <code>min</code>","text":"<p>Returns the smallest value in a vector.</p> <pre><code>\u21aa (min [1 2 3])\n1\n</code></pre>"},{"location":"content/math/mod.html","title":"Mod <code>%</code>","text":"<p>Makes a division of it's arguments, takes a remainder. Supports such types and their combinations: <code>i64</code>, <code>I64</code>, <code>f64</code>, <code>F64</code>.</p> <pre><code>\u21aa (% 1 2)\n1\n\u21aa (% 1.2 2.2)\n1\n\u21aa (% 2 3.4)\n2\n\u21aa (% [1 2 3] 3)\n[1 2 0]\n\u21aa (% [1 2 3] 2.1)\n[1 2 0]\n\u21aa (% 3.1 [1 2 3])\n[0 1 0]\n</code></pre>"},{"location":"content/math/mul.html","title":"Mul <code>*</code>","text":"<p>Makes a multiplication of it's arguments. Supports such types and their combinations: <code>i64</code>, <code>I64</code>, <code>f64</code>, <code>F64</code>.</p> <pre><code>\u21aa (* 1 2)\n2\n\u21aa (* 1.2 2.2)\n2.64\n\u21aa (* 1 3.4)\n3.4\n\u21aa (* [1 2 3] 3)\n[3 6 9]\n\u21aa (* [1 2 3] 3.1)\n[3.1 6.2 9.3]\n\u21aa (* 3.1 [1 2 3])\n[3.1 6.2 9.3]\n</code></pre>"},{"location":"content/math/round.html","title":"Round <code>round</code>","text":"<p>The <code>round</code> function rounds a number to the nearest integer. If the number is halfway between two integers, it rounds to the nearest even integer.</p> <pre><code>\u21aa (round 1.5)\n2\n\u21aa (round 1.4)\n1\n(round [1.2 34])\n[1 34]\n</code></pre>"},{"location":"content/math/sub.html","title":"Sub <code>-</code>","text":"<p>Makes a subtraction of it's arguments. Supports such types and their combinations: <code>i64</code>, <code>I64</code>, <code>f64</code>, <code>F64</code>, <code>Timestamp</code>.</p> <pre><code>\u21aa (- 1 2)\n-1\n\u21aa (- 1.2 2.2)\n-1\n\u21aa (- 1 3.4)\n-2\n\u21aa (- [1 2 3] 3)\n[-2 -1 0]\n\u21aa (- [1 2 3] 3.1)\n[-2.1 -1.1 -0.1]\n\u21aa (- 3.1 [1 2 3])\n[2.1 1.1 0.1]\n</code></pre>"},{"location":"content/math/sum.html","title":"Sum <code>sum</code>","text":"<p>Makes a sum of it's argument. Supports such types: <code>i64</code>, <code>I64</code>, <code>f64</code>, <code>F64</code>.</p> <pre><code>\u21aa (sum 3)\n3\n\u21aa (sum [1.2 2.2 3.2])\n6.6\n\u21aa (sum [1 2 3])\n6\n</code></pre>"},{"location":"content/math/xbar.html","title":"Xbar <code>xbar</code>","text":"<p>The xbar is a statistical symbol that represents the mean of a sample. It is calculated by adding up all the values in the sample and dividing by the number of values in the sample.</p> <pre><code>\u21aa (xbar [1 2 3 4 5])\n3\n\u21aa (xbar [1 2 3 4 5 6 7 8 9 10])\n5.5\n</code></pre>"},{"location":"content/misc/count.html","title":"Count <code>count</code>","text":"<p>Returns the number of elements in a collection or the length of a string.</p> <pre><code>\u21aa (count [1 2 3 4 5])\n5\n\u21aa (count \"hello\")\n5\n\u21aa (count (list 1 2 \"three\" [4 5]))\n4\n\u21aa (count {a: 1 b: 2 c: 3})\n3\n</code></pre> <p>Info</p> <ul> <li>Works with arrays, lists, strings, and dictionaries</li> <li>For dictionaries, returns the number of key-value pairs</li> <li>For nested structures, counts only top-level elements</li> </ul> <p>Tip</p> <p>Use count to get the size of any collection or string</p>"},{"location":"content/misc/gc.html","title":"Garbage Collect <code>gc</code>","text":"<p>Triggers manual garbage collection.</p> <pre><code>\u21aa (gc)\nnull\n</code></pre> <p>Info</p> <ul> <li>Frees memory by collecting unused objects</li> <li>Returns null</li> <li>Execution time depends on heap size</li> </ul> <p>Warning</p> <p>Manual garbage collection should be used sparingly, as the runtime automatically manages memory</p> <p>Tip</p> <p>Use gc when you need to explicitly free memory after large operations</p>"},{"location":"content/misc/meta.html","title":"Meta <code>meta</code>","text":"<p>Returns metadata about a value.</p> <pre><code>\u21aa (meta [1 2 3])\n{\n  type: Array\n  length: 3\n  element_type: I64\n}\n\u21aa (meta \"hello\")\n{\n  type: String\n  length: 5\n}\n\u21aa (meta (table [a b] [[1 2] [3 4]]))\n{\n  type: Table\n  columns: [a b]\n  rows: 2\n}\n</code></pre> <p>Info</p> <ul> <li>Returns a dictionary containing type information</li> <li>Different types have different metadata fields</li> <li>Useful for runtime type inspection</li> </ul> <p>Tip</p> <p>Use meta to inspect object properties or implement generic functions</p>"},{"location":"content/misc/rc.html","title":"Reference Count <code>rc</code>","text":"<p>Returns the reference count of an object.</p> <pre><code>\u21aa (set x [1 2 3])\n\u21aa (rc x)\n1\n\u21aa (set y x)\n\u21aa (rc x)\n2\n</code></pre> <p>Info</p> <ul> <li>Shows how many references point to an object</li> <li>Useful for debugging memory management</li> <li>Objects are freed when reference count reaches 0</li> </ul> <p>Warning</p> <p>This is a debugging tool and should not be relied upon in production code</p> <p>Tip</p> <p>Use rc to track object references when debugging memory issues</p>"},{"location":"content/misc/type.html","title":"Type <code>type</code>","text":"<p>Returns the type of a value as a symbol.</p> <pre><code>\u21aa (type 42)\nI64\n\u21aa (type \"hello\")\nString\n\u21aa (type [1 2 3])\nArray\n\u21aa (type {a: 1})\nDict\n\u21aa (type (fn [x] x))\nFunction\n</code></pre> <p>Info</p> <ul> <li>Returns a symbol representing the value's type</li> <li>Works with all built-in types</li> <li>Useful for type checking and conditional logic</li> </ul> <p>Tip</p> <p>Use type for runtime type checking or implementing type-specific behavior</p>"},{"location":"content/order/asc.html","title":"Ascending <code>asc</code>","text":"<p>Sorts elements in ascending order.</p> <pre><code>\u21aa (asc [3 1 4 1 5 9 2 6])\n[1 1 2 3 4 5 6 9]\n\u21aa (asc [\"banana\" \"apple\" \"cherry\"])\n[apple banana cherry]\n</code></pre> <p>Info</p> <ul> <li>Works with numbers, strings, and other comparable types</li> <li>Returns a new sorted array/list</li> <li>Maintains the original data type (array \u2192 array, list \u2192 list)</li> </ul> <p>Tip</p> <p>Use asc for simple ascending sorts of single collections</p>"},{"location":"content/order/desc.html","title":"Descending <code>desc</code>","text":"<p>Sorts elements in descending order.</p> <pre><code>\u21aa (desc [3 1 4 1 5 9 2 6])\n[9 6 5 4 3 2 1 1]\n\u21aa (desc [\"banana\" \"apple\" \"cherry\"])\n[cherry banana apple]\n</code></pre> <p>Info</p> <ul> <li>Works with numbers, strings, and other comparable types</li> <li>Returns a new sorted array/list</li> <li>Maintains the original data type (array \u2192 array, list \u2192 list)</li> </ul> <p>Tip</p> <p>Use desc for simple descending sorts of single collections</p>"},{"location":"content/order/iasc.html","title":"Index Ascending <code>iasc</code>","text":"<p>Returns indices that would sort the input in ascending order.</p> <pre><code>\u21aa (iasc [3 1 4 1 5])\n[1 3 0 2 4]\n\u21aa (iasc [\"banana\" \"apple\" \"cherry\"])\n[1 0 2]\n</code></pre> <p>Info</p> <ul> <li>Returns indices instead of sorting the actual data</li> <li>Result can be used to reorder multiple related arrays</li> <li>Works with any comparable types</li> </ul> <p>Tip</p> <p>Use iasc when you need to sort multiple arrays based on one array's order</p>"},{"location":"content/order/idesc.html","title":"Index Descending <code>idesc</code>","text":"<p>Returns indices that would sort the input in descending order.</p> <pre><code>\u21aa (idesc [3 1 4 1 5])\n[4 2 0 1 3]\n\u21aa (idesc [\"banana\" \"apple\" \"cherry\"])\n[2 0 1]\n</code></pre> <p>Info</p> <ul> <li>Returns indices instead of sorting the actual data</li> <li>Result can be used to reorder multiple related arrays</li> <li>Works with any comparable types</li> </ul> <p>Tip</p> <p>Use idesc when you need to sort multiple arrays in reverse order based on one array's order</p>"},{"location":"content/order/neg.html","title":"Negate <code>neg</code>","text":"<p>Returns the negative of a number or applies negation element-wise to arrays.</p> <pre><code>\u21aa (neg 5)\n-5\n\u21aa (neg -3)\n3\n\u21aa (neg [1 -2 3 -4])\n[-1 2 -3 4]\n</code></pre> <p>Info</p> <ul> <li>Works with both single numbers and arrays</li> <li>When used with arrays, applies element-wise</li> <li>Preserves the type (integer or float)</li> </ul> <p>Warning</p> <p>Only works with numeric types</p>"},{"location":"content/order/xasc.html","title":"Cross Ascending <code>xasc</code>","text":"<p>Sorts a table in ascending order based on specified columns.</p> <pre><code>\u21aa (set t (table [name age score] (list [\"Bob\" \"Alice\" \"Charlie\"] [25 30 20] [85 90 95])))\n\u21aa (xasc [name] t)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 name    \u2502 age \u2502 score \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Alice   \u2502 30  \u2502 90    \u2502\n\u2502 Bob     \u2502 25  \u2502 85    \u2502\n\u2502 Charlie \u2502 20  \u2502 95    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Info</p> <ul> <li>First argument is a vector of column names to sort by</li> <li>Supports multiple columns for hierarchical sorting</li> <li>Modifies the table in place</li> </ul> <p>Tip</p> <p>Use xasc for sorting tables by one or more columns</p>"},{"location":"content/order/xdesc.html","title":"Cross Descending <code>xdesc</code>","text":"<p>Sorts a table in descending order based on specified columns.</p> <pre><code>\u21aa (set t (table [name age score] (list [\"Bob\" \"Alice\" \"Charlie\"] [25 30 20] [85 90 95])))\n\u21aa (xdesc [score] t)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 name    \u2502 age \u2502 score \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Charlie \u2502 20  \u2502 95    \u2502\n\u2502 Alice   \u2502 30  \u2502 90    \u2502\n\u2502 Bob     \u2502 25  \u2502 85    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Info</p> <ul> <li>First argument is a vector of column names to sort by</li> <li>Supports multiple columns for hierarchical sorting</li> <li>Modifies the table in place</li> </ul> <p>Tip</p> <p>Use xdesc for sorting tables in descending order by one or more columns</p> <p>Note</p> <p>For multiple columns, each column is sorted in descending order</p>"},{"location":"content/query/select.html","title":"Select <code>select</code>","text":"<p>Performs data selection and aggregation on tables or arrays.</p> <pre><code>;; Basic selection with multiple types\n\u21aa (set employees (table [name dept salary hire_date last_login] \n                       (list (list \"Alice\" \"Bob\" \"Charlie\")        ;; strings in lists\n                            ['IT 'HR 'IT]                          ;; symbols in vectors\n                            [75000 65000 85000]                    ;; numbers in vectors\n                            [2021.01.15 2020.03.20 2019.11.30]     ;; dates\n                            [2024.03.15T09:30:00 2024.03.15T10:15:00 2024.03.15T11:45:00]))) ;; timestamps\n\n;; Select specific columns\n\u21aa (select {name: name dept: dept salary: salary from: employees})\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 name    \u2502 dept \u2502 salary \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Alice   \u2502 IT   \u2502 75000  \u2502\n\u2502 Bob     \u2502 HR   \u2502 65000  \u2502\n\u2502 Charlie \u2502 IT   \u2502 85000  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n;; Selection with condition\n\u21aa (select {name: name salary: salary from: employees where: (&gt; salary 70000)})\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 name    \u2502 salary \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Alice   \u2502 75000  \u2502\n\u2502 Charlie \u2502 85000  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n;; Aggregation by department\n\u21aa (select {dept: dept\n           avg_salary: (avg salary)\n           headcount: (count name)\n           earliest_hire: (min hire_date)\n           from: employees\n           by: dept})\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 dept \u2502 avg_salary \u2502 headcount \u2502 earliest_hire \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 IT   \u2502 80000.0    \u2502 2         \u2502 2019.11.30    \u2502\n\u2502 HR   \u2502 65000.0    \u2502 1         \u2502 2020.03.20    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Syntax</p> <p><pre><code>(select {column1: expr1\n         column2: expr2\n         ...\n         from: source\n         [where: condition]\n         [by: grouping]})\n</code></pre> - All select parameters are part of a single dictionary - Column definitions and clauses are key-value pairs - <code>from</code> is required, <code>where</code> and <code>by</code> are optional</p> <p>Common Uses</p> <ul> <li>Data filtering and transformation</li> <li>Aggregation and analysis</li> <li>Complex data reshaping</li> <li>Report generation</li> </ul> <p>Warning</p> <ul> <li>Column names must be symbols</li> <li>Column names in the result must be unique</li> <li>Aggregations require compatible types</li> <li>Group by columns must be included in the result</li> <li>String arrays must be created using lists, not vectors</li> <li>Symbol arrays can use vector literal syntax without quotes</li> </ul> <p>Advanced Example</p> <pre><code>;; Multiple aggregations with filtering and temporal data\n\u21aa (set activity (table [user region login_time duration] \n                      (list (list \"Alice\" \"Bob\" \"Charlie\")\n                            ['US 'EU 'US]\n                            [2024.03.15T08:00:00 2024.03.15T14:30:00 2024.03.15T09:15:00]\n                            [45 30 60])))\n\u21aa (select {region: region\n           users: (count user)\n           avg_duration: (avg duration)\n           last_login: (max login_time)\n           from: activity\n           where: (&gt; duration 20)\n           by: region})\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 region \u2502 users \u2502 avg_duration\u2502 last_login          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 US     \u2502 2     \u2502 52.5        \u2502 2024.03.15T09:15:00 \u2502\n\u2502 EU     \u2502 1     \u2502 30.0        \u2502 2024.03.15T14:30:00 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"content/repl/args.html","title":"Args <code>args</code>","text":"<p>Returns command line arguments passed to the script.</p> <pre><code>;; When script.rf is run as: rayforce script.rf arg1 arg2\n\u21aa (args)\n[\"arg1\" \"arg2\"]\n\n;; Check if arguments were provided\n\u21aa (&gt; (count (args)) 0)\ntrue\n\n;; Access specific argument\n\u21aa (at (args) 0)\n\"arg1\"\n</code></pre> <p>Syntax</p> <pre><code>(args)\n</code></pre> <p>Warning</p> <ul> <li>Returns list of strings</li> <li>Empty list if no arguments</li> <li>Does not include script name</li> <li>Only available in script mode</li> </ul>"},{"location":"content/repl/eval.html","title":"Eval <code>eval</code>","text":"<p>Evaluates a string or expression.</p> <pre><code>;; Evaluate a string\n\u21aa (eval \"(+ 1 2)\")\n3\n\n;; Evaluate a list\n\u21aa (set expr (list + 1 2))\n[+ 1 2]\n\u21aa (eval expr)\n3\n\n;; Evaluate with variables \n\u21aa (set x 10)\n10\n\u21aa (eval \"(+ x 5)\")\n15\n\n;; Evaluate multiple expressions\n\u21aa (eval \"(set y 20) (+ x y)\")\n30\n</code></pre> <p>Syntax</p> <p><pre><code>(eval expr)\n</code></pre> - <code>expr</code>: String or expression to evaluate</p> <p>Warning</p> <ul> <li>String expressions must be valid Rayforce code</li> <li>Returns the result of evaluation</li> <li>Can evaluate both strings and expressions</li> </ul>"},{"location":"content/repl/load.html","title":"Load <code>load</code>","text":"<p>Loads and evaluates code from a file.</p> <pre><code>;; Load a file\n\u21aa (load \"lib.rf\")\nnull\n\n;; Load with error handling\n\u21aa (try (load \"missing.rf\") {e: \"File not found\"})\n\"File not found\"\n</code></pre> <p>Syntax</p> <p><pre><code>(load filename)\n</code></pre> - <code>filename</code>: Path to file to load</p> <p>Warning</p> <ul> <li>File must contain valid Rayforce code</li> <li>Returns result of last evaluated expression</li> <li>Throws error if file not found or contains invalid code</li> </ul>"},{"location":"content/repl/parse.html","title":"Parse <code>parse</code>","text":"<p>Parses a string into an expression without evaluating it.</p> <pre><code>;; Parse a simple expression\n\u21aa (parse \"(+ 1 2)\")\n[+ 1 2]\n\n;; Parse a function definition\n\u21aa (parse \"(fn [x] (* x 2))\")\n[fn [x] [* x 2]]\n\n;; Parse multiple expressions\n\u21aa (parse \"\n   (set x 10)\n   (+ x 20)\n   \")\n[[set x 10] [+ x 20]]\n</code></pre> <p>Syntax</p> <p><pre><code>(parse str)\n</code></pre> - <code>str</code>: String to parse</p> <p>Warning</p> <ul> <li>Input must be a string</li> <li>Returns parsed expression without evaluating</li> <li>Useful for inspecting code structure</li> </ul>"},{"location":"content/repl/quote.html","title":"Quote <code>quote</code>","text":"<p>Prevents evaluation of an expression.</p> <pre><code>;; Quote a symbol\n\u21aa (quote x)\n'x\n\n;; Quote a list\n\u21aa (quote [+ 1 2])\n[+ 1 2]\n\n;; Quote prevents evaluation\n\u21aa (set x 10)\n\u21aa (quote x)\n'x  ;; Returns symbol rather than value\n\n;; Shorthand quote syntax\n\u21aa 'x\n'x\n</code></pre> <p>Syntax</p> <p><pre><code>(quote expr)\n</code></pre> - <code>expr</code>: Expression to quote</p> <p>Warning</p> <ul> <li>Returns expression without evaluating</li> <li>Useful for manipulating code as data</li> <li>Can use ' as shorthand for quote</li> </ul>"},{"location":"content/repl/resolve.html","title":"Resolve <code>resolve</code>","text":"<p>Resolves a symbol to its bound value.</p> <pre><code>;; Resolve a variable\n\u21aa (set x 10)\n\u21aa (resolve 'x)\n10\n\n;; Resolve a function\n\u21aa (resolve '+)\n&lt;function:+&gt;\n\n;; Resolve an undefined symbol\n\u21aa (resolve 'undefined)\nnull\n</code></pre> <p>Syntax</p> <p><pre><code>(resolve sym)\n</code></pre> - <code>sym</code>: Symbol to resolve</p> <p>Warning</p> <ul> <li>Symbol must be quoted</li> <li>Returns bound value or null if unbound</li> <li>Works for variables and functions</li> </ul>"},{"location":"content/repl/set_display_width.html","title":"Set Display Width <code>set-display-width</code>","text":"<p>Sets the maximum width for displaying tables and other formatted output.</p> <pre><code>;; Set display width to 40 characters\n\u21aa (set-display-width 40)\n40\n\n;; Create a wide table to demonstrate\n\u21aa (set t (table [name location department salary] \n                (list (list \"Alice Smith\" \"New York\" \"Engineering\" \"75000\")\n                      (list \"Bob Johnson\" \"San Francisco\" \"Marketing\" \"65000\"))))\n\n;; Display with width limit\n\u21aa t\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 name       \u2502 location \u2502 department \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Alice Smith\u2502 New York \u2502Engineering \u2502\n\u2502Bob Johnson \u2502San Fran..\u2502 Marketing  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Syntax</p> <p><pre><code>(set-display-width width)\n</code></pre> - <code>width</code>: Maximum display width in characters</p> <p>Warning</p> <ul> <li>Width must be a positive integer</li> <li>Affects all subsequent table displays</li> <li>Long values will be truncated with \"..\"</li> </ul>"},{"location":"content/repl/set_fpr.html","title":"Set Floating Point Resolution <code>set-fpr</code>","text":"<p>Sets the number of decimal places shown for floating point numbers.</p> <pre><code>;; Set floating point resolution to 2 decimals\n\u21aa (set-fpr 2)\n2\n\n;; Demonstrate with calculations\n\u21aa (/ 10 3)\n3.33\n\n;; Set to higher precision\n\u21aa (set-fpr 4)\n4\n\u21aa (/ 10 3)\n3.3333\n</code></pre> <p>Syntax</p> <p><pre><code>(set-fpr precision)\n</code></pre> - <code>precision</code>: Number of decimal places to display</p> <p>Warning</p> <ul> <li>Precision must be a non-negative integer</li> <li>Only affects display, not internal precision</li> <li>Applies to all subsequent floating point output</li> </ul>"},{"location":"content/repl/use_unicode_format.html","title":"Use Unicode Format <code>use-unicode-format</code>","text":"<p>Toggles between Unicode and ASCII characters for table borders and other formatting.</p> <pre><code>;; Enable Unicode formatting\n\u21aa (use-unicode-format true)\ntrue\n\n;; Create a sample table\n\u21aa (table [name value] (list (list \"A\" \"B\") [1 2]))\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 name \u2502 value \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 A    \u2502 1     \u2502\n\u2502 B    \u2502 2     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n;; Disable Unicode formatting\n\u21aa (use-unicode-format false)\nfalse\n\n;; Same table with ASCII\n\u21aa (table [name value] (list (list \"A\" \"B\") [1 2]))\n+------+-------+\n| name | value |\n+------+-------+\n| A    | 1     |\n| B    | 2     |\n+------+-------+\n</code></pre> <p>Syntax</p> <p><pre><code>(use-unicode-format enabled)\n</code></pre> - <code>enabled</code>: Boolean to enable/disable Unicode formatting</p> <p>Warning</p> <ul> <li>Takes effect immediately for all subsequent output</li> <li>May not display correctly in all terminals</li> <li>Default is Unicode enabled</li> </ul>"},{"location":"content/serde/index.html","title":"Serialization","text":"<p>Serialization is the process of converting nearly any Rayforce datatypes into a format suitable for storage or transmission, say: vector of bytes. This fundamental concept is integral to many software operations, from persisting object states to facilitating remote procedure calls.  </p>"},{"location":"content/serde/index.html#binary-format-structure","title":"Binary Format Structure","text":""},{"location":"content/serde/index.html#header-16-bytes","title":"Header (16 bytes)","text":"<p>Each serialized object starts with a 16-byte header:</p> <pre><code>typedef struct header_t\n{\n    u32_t prefix;     // Magic number (0xRAF0) to identify Rayforce serialized data\n    u8_t  version;    // Serialization format version (current: 1)\n    u8_t  flags;      // Additional flags for special handling (compression, encryption)\n    u16_t reserved;   // Reserved for future use (must be 0)\n    u64_t size;       // Total size of the payload in bytes\n} header_t;\n</code></pre>"},{"location":"content/serde/index.html#type-identifier-1-byte","title":"Type Identifier (1 byte)","text":"<p>Next, there is a type of the object. It's a single byte that identifies the data type:</p> <pre><code>1: Integer (I64)      // 64-bit signed integer\n2: Array              // Homogeneous array of values\n3: String            // UTF-8 encoded string\n4: Symbol            // Interned symbol\n5: Function          // Function definition\n6: Dictionary        // Key-value pairs\n7: Table            // Columnar data structure\n8: Float (F64)      // 64-bit floating point\n9: List             // Heterogeneous list\n// ... etc\n</code></pre>"},{"location":"content/serde/index.html#payload-format","title":"Payload Format","text":"<p>The payload format depends on the object type:</p>"},{"location":"content/serde/index.html#simple-types","title":"Simple Types","text":"<ul> <li>Integer (I64): 8 bytes, little-endian</li> <li>Float (F64): 8 bytes, IEEE 754</li> <li>Symbol: UTF-8 bytes of symbol name</li> </ul>"},{"location":"content/serde/index.html#compound-types","title":"Compound Types","text":"<ul> <li>Vectors: </li> <li>u64: length</li> <li>[type byte]</li> <li> <p>[elements...]</p> </li> <li> <p>Strings: </p> </li> <li>u64: length in bytes</li> <li> <p>[UTF-8 encoded bytes]</p> </li> <li> <p>Dictionaries:</p> </li> <li>u64: number of pairs</li> <li>[keys section]</li> <li> <p>[values section]</p> </li> <li> <p>Tables:</p> </li> <li>u64: number of columns</li> <li>u64: number of rows</li> <li>[column names]</li> <li> <p>[column data]</p> </li> <li> <p>Functions:</p> </li> <li>u64: source code length</li> <li>[UTF-8 source code]</li> <li>[captured environment]</li> </ul> <p>Info</p> <p>The serialization format is designed to be: - Compact: minimal overhead for simple types - Self-describing: includes type information - Extensible: can handle new types - Version-aware: supports format evolution - Endian-aware: consistent byte ordering</p> <p>Important Considerations</p> <ul> <li>When serializing functions, only the source code is preserved</li> <li>The runtime environment must have all required dependencies</li> <li>Large objects are not compressed by default</li> <li>Version mismatches will prevent deserialization</li> <li>Invalid data may cause deserialization errors</li> </ul> <p>Best Practices</p> <p>Use serialization when you need to: - Store data persistently - Transfer data between processes - Create checkpoints or backups - Implement caching mechanisms - Share data between different Rayforce instances</p> <p>Version Compatibility</p> <ul> <li>Version 1: Basic type support</li> <li>Future versions may add:<ul> <li>Compression support</li> <li>Encryption</li> <li>Custom type handlers</li> <li>Schema validation</li> </ul> </li> </ul>"},{"location":"content/serde/de.html","title":"Deserialize <code>de</code>","text":"<p>Deserializes a binary format back into a value.</p> <pre><code>\u21aa (de (ser 42))\n42\n\n\u21aa (de (ser \"hello\"))\n\"hello\"\n\n\u21aa (de (ser [1 2 3]))\n[1 2 3]\n\n\u21aa (de (ser {a: 1 b: 2}))\n{\n  a: 1\n  b: 2\n}\n</code></pre> <p>Info</p> <ul> <li>Reconstructs values from serialized byte arrays</li> <li>Preserves original types and structures</li> <li>Can deserialize any value that was serialized with ser</li> </ul> <p>Warning</p> <ul> <li>Ensure the serialized data is valid and complete</li> <li>When deserializing functions, required dependencies must be available</li> </ul> <p>Tip</p> <p>Use de to recover data that was previously serialized with ser</p>"},{"location":"content/serde/ser.html","title":"Serialize <code>ser</code>","text":"<p>Serializes a value into a binary format.</p> <pre><code>\u21aa (ser 42)\n[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 8 1 42]\n\n\u21aa (ser \"hello\")\n[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 13 3 104 101 108 108 111]\n\n\u21aa (ser [1 2 3])\n[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 27 2 0 0 0 0 0 0 0 3 1 1 1 2 1 3]\n</code></pre> <p>Info</p> <ul> <li>Converts any Rayforce value into a byte array</li> <li>Includes type information in the serialized data</li> <li>Preserves the complete structure of complex objects</li> </ul> <p>Warning</p> <p>Functions are serialized as their source code - ensure all dependencies are available when deserializing</p> <p>Tip</p> <p>Use ser when you need to store data or send it over a network</p>"},{"location":"content/temporal/date.html","title":"Date","text":"<p>Represents a calendar date.</p> <pre><code>;; Get current date in local timezone\n\u21aa (date 'local)\n2024.03.15\n\n;; Get current date in UTC\n\u21aa (date 'utc) \n2024.03.15\n\n;; Create dates from numbers\n\u21aa (as 'date 2024.03.15)\n2024.03.15\n\n;; Date arithmetic\n\u21aa (+ 2024.03.15 1)  ;; Add one day\n2024.03.16\n\n;; Compare dates\n\u21aa (&lt; 2024.03.15 2024.03.16)\ntrue\n\n;; Extract from timestamp\n\u21aa (as 'date 2024.03.15T10:30:00)\n2024.03.15\n</code></pre> <p>Format</p> <ul> <li>Dates are stored as days since epoch (1970.01.01)</li> <li>Display format is YYYY.MM.DD</li> <li>Internally represented as 32-bit integers</li> </ul> <p>Warning</p> <ul> <li>Valid range is from 1970.01.01 to 2099.12.31</li> <li>Invalid dates return null</li> <li>Date arithmetic works in days</li> </ul>"},{"location":"content/temporal/time.html","title":"Time","text":"<p>Represents time of day.</p> <pre><code>;; Get current time in local timezone\n\u21aa (time 'local)\n10:30:00\n\n;; Get current time in UTC\n\u21aa (time 'utc)\n14:30:00\n\n;; Create time from numbers\n\u21aa (as 'time 10:30:00)\n10:30:00\n\n;; Time arithmetic (in milliseconds)\n\u21aa (+ 10:30:00 3600000)  ;; Add one hour\n11:30:00\n\n;; Compare times\n\u21aa (&lt; 10:30:00 11:30:00)\ntrue\n\n;; Extract from timestamp\n\u21aa (as 'time 2024.03.15T10:30:00)\n10:30:00\n</code></pre> <p>Format</p> <ul> <li>Times are stored as milliseconds since midnight</li> <li>Display format is HH:MM:SS</li> <li>Internally represented as 32-bit integers</li> </ul> <p>Warning</p> <ul> <li>Valid range is 00:00:00 to 23:59:59.999</li> <li>Invalid times return null</li> <li>Time arithmetic works in milliseconds</li> </ul>"},{"location":"content/temporal/timestamp.html","title":"Timestamp","text":"<p>Represents a point in time combining date and time.</p> <pre><code>;; Get current timestamp in local timezone\n\u21aa (timestamp 'local)\n2024.03.15T10:30:00\n\n;; Get current timestamp in UTC\n\u21aa (timestamp 'utc)\n2024.03.15T14:30:00\n\n;; Create timestamp from string\n\u21aa (as 'timestamp \"2024.03.15T10:30:00\")\n2024.03.15T10:30:00\n\n;; Timestamp arithmetic (in milliseconds)\n\u21aa (+ 2024.03.15T10:30:00 3600000)  ;; Add one hour\n2024.03.15T11:30:00\n\n;; Compare timestamps\n\u21aa (&lt; 2024.03.15T10:30:00 2024.03.15T11:30:00)\ntrue\n\n;; Extract components\n\u21aa (as 'date 2024.03.15T10:30:00)\n2024.03.15\n\u21aa (as 'time 2024.03.15T10:30:00)\n10:30:00\n</code></pre> <p>Format</p> <ul> <li>Timestamps combine date and time</li> <li>Display format is YYYY.MM.DDThhss</li> <li>Internally represented as 64-bit integers (milliseconds since epoch)</li> </ul> <p>Warning</p> <ul> <li>Valid range is from 1970.01.01T00:00:00 to 2099.12.31T23:59:59.999</li> <li>Invalid timestamps return null</li> <li>Timestamp arithmetic works in milliseconds</li> <li>Timezone conversions respect local system settings</li> </ul>"},{"location":"content/time/timeit.html","title":"Timeit <code>timeit</code>","text":"<p>Measures execution time of an expression.</p> <pre><code>;; Measure simple calculation\n\u21aa (timeit (+ 1 2))\n0.015\n\n;; Measure function execution\n\u21aa (timeit (map {x: (* x 2)} [1 2 3 4 5]))\n0.245\n\n;; Measure with error handling\n\u21aa (timeit (try (/ 1 0) {e: \"Division by zero\"}))\n0.032\n\n;; Multiple expressions\n\u21aa (timeit (do \n            (set x 10)\n            (+ x 20)\n            (* x 2)))\n0.128\n</code></pre> <p>Syntax</p> <p><pre><code>(timeit expr)\n</code></pre> - <code>expr</code>: Expression to measure - Returns execution time in milliseconds</p> <p>Warning</p> <ul> <li>Time includes parsing and evaluation</li> <li>Results may vary between runs</li> <li>Precision depends on system timer resolution</li> <li>Special form - does not evaluate argument first</li> </ul>"},{"location":"content/time/timer.html","title":"Timer <code>timer</code>","text":"<p>Creates and manages recurring timers.</p> <pre><code>;; Create a timer that runs every 1000ms (1 second)\n\u21aa (timer 1000 0 {t: (println \"Timer tick:\" t)})\n0  ;; Returns timer ID\n\n;; Create a timer that runs 5 times\n\u21aa (timer 1000 5 {t: (println \"Count:\" t)})\n1  ;; Returns different timer ID\n\n;; Remove a timer by ID\n\u21aa (timer 0)\nnull\n\n;; Create infinite timer (runs until removed)\n\u21aa (timer 5000 0 {t: (do\n                     (println \"Background task at:\" t)\n                     (gc))})  ;; Run garbage collection every 5 seconds\n2\n</code></pre> <p>Syntax</p> <p><pre><code>;; Create timer\n(timer interval times callback)\n;; Remove timer\n(timer id)\n</code></pre> - <code>interval</code>: Time between executions in milliseconds - <code>times</code>: Number of executions (0 for infinite) - <code>callback</code>: Lambda to execute (receives current time as argument) - <code>id</code>: Timer ID to remove</p> <p>Warning</p> <ul> <li>Minimum interval is system-dependent</li> <li>Callback execution time affects next interval</li> <li>Timer continues until removed or count reached</li> <li>Timers are cleared when process exits</li> </ul>"},{"location":"content/update/alter.html","title":"Alter <code>alter</code>","text":"<p>Modifies elements in a collection based on a condition.</p> <pre><code>\u21aa (set arr [1 2 3 4 5])\n\u21aa (alter arr (&gt; arr 3) (* arr 2))\n[1 2 3 8 10]\n\n\u21aa (set t (table [name age] [[\"Alice\" \"Bob\" \"Charlie\"] [25 30 35]]))\n\u21aa (alter t (&gt; age 28) {age: (+ age 1)})\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 name    \u2502 age \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Alice   \u2502 25  \u2502\n\u2502 Bob     \u2502 31  \u2502\n\u2502 Charlie \u2502 36  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Info</p> <ul> <li>First argument: collection to modify</li> <li>Second argument: condition for selecting elements</li> <li>Third argument: transformation to apply</li> <li>Modifies the collection in place</li> </ul> <p>Warning</p> <p>The condition and transformation must be compatible with the collection's type</p> <p>Tip</p> <p>Use alter for conditional updates on arrays or tables</p>"},{"location":"content/update/insert.html","title":"Insert <code>insert</code>","text":"<p>Adds new rows to a table.</p> <pre><code>\u21aa (set t (table [name age] [[\"Alice\" \"Bob\"] [25 30]]))\n\u21aa (insert t {name: \"Charlie\" age: 35})\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 name    \u2502 age \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Alice   \u2502 25  \u2502\n\u2502 Bob     \u2502 30  \u2502\n\u2502 Charlie \u2502 35  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u21aa (insert t [{name: \"David\" age: 40} {name: \"Eve\" age: 45}])\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 name    \u2502 age \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Alice   \u2502 25  \u2502\n\u2502 Bob     \u2502 30  \u2502\n\u2502 Charlie \u2502 35  \u2502\n\u2502 David   \u2502 40  \u2502\n\u2502 Eve     \u2502 45  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Info</p> <ul> <li>Can insert a single row or multiple rows</li> <li>Rows are added at the end of the table</li> <li>Modifies the table in place</li> </ul> <p>Warning</p> <p>New rows must have all required columns with correct types</p> <p>Tip</p> <p>Use insert when adding new data to existing tables</p>"},{"location":"content/update/update.html","title":"Update <code>update</code>","text":"<p>Updates existing rows in a table based on a condition.</p> <pre><code>\u21aa (set t (table [name age] [[\"Alice\" \"Bob\" \"Charlie\"] [25 30 35]]))\n\u21aa (update t (= name \"Bob\") {age: 31})\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 name    \u2502 age \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Alice   \u2502 25  \u2502\n\u2502 Bob     \u2502 31  \u2502\n\u2502 Charlie \u2502 35  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u21aa (update t (&gt; age 30) {age: (+ age 1)})\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 name    \u2502 age \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Alice   \u2502 25  \u2502\n\u2502 Bob     \u2502 32  \u2502\n\u2502 Charlie \u2502 36  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Info</p> <ul> <li>First argument: table to modify</li> <li>Second argument: condition for selecting rows</li> <li>Third argument: updates to apply</li> <li>Modifies the table in place</li> </ul> <p>Warning</p> <p>Updates must maintain column types and constraints</p> <p>Tip</p> <p>Use update for conditional modifications of existing rows</p>"},{"location":"content/update/upsert.html","title":"Upsert <code>upsert</code>","text":"<p>Updates existing rows or inserts new ones based on a key.</p> <pre><code>\u21aa (set t (table [id name age] [[1 2] [\"Alice\" \"Bob\"] [25 30]]))\n\u21aa (upsert t id {id: 2 name: \"Robert\" age: 31})\n\u250c\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 id \u2502 name   \u2502 age \u2502\n\u251c\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 1  \u2502 Alice  \u2502 25  \u2502\n\u2502 2  \u2502 Robert \u2502 31  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u21aa (upsert t id {id: 3 name: \"Charlie\" age: 35})\n\u250c\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 id \u2502 name    \u2502 age \u2502\n\u251c\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 1  \u2502 Alice   \u2502 25  \u2502\n\u2502 2  \u2502 Robert  \u2502 31  \u2502\n\u2502 3  \u2502 Charlie \u2502 35  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Info</p> <ul> <li>First argument: table to modify</li> <li>Second argument: key column(s) for matching</li> <li>Third argument: row data to upsert</li> <li>Updates existing row if key matches, otherwise inserts new row</li> </ul> <p>Warning</p> <p>Key columns must uniquely identify rows</p> <p>Tip</p> <p>Use upsert when you want to update existing rows or add new ones in a single operation</p>"}]}